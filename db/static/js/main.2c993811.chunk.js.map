{"version":3,"sources":["lang/en.js","lang/langs.js","store/initialState.js","store/settings.js","store/view.js","utils/round.js","store/insulinUnits.js","utils/min.js","store/records.js","utils/doStringMath.js","utils/mergeStates.js","utils/resetStates.js","utils/makeOnFocusSelect.js","utils/makeOnChanged.js","utils/makeOnBlur.js","utils/styles.js","InsulinUnits.js","utils/makeOnFocusGotoEndOrSelectZero.js","store/proportionateCarbs.js","ProportionateCarbs.js","Records.js","Settings.js","Warning.js","About.js","App.js","reportWebVitals.js","store/store.js","manifest.js","index.js"],"names":["bgUnit","carbUnit","weightVolumeUnit","langs","en","insulinUnitsTitle","insulinUnitsTakeInsulinButtonText","insulinUnitsNoInsulinButtonText","insulinUnitsRecordOnlyButtonText","insulinUnitsResetButtonText","insulinUnitsUnitText","insulinUnitsAddProportionateCarbsButtonText","insulinUnitsConsumedCarbsLabelText","insulinUnitsConsumedCarbsInfoText","insulinUnitsConsumedCarbsUnitText","insulinUnitsCurrentBgLabelText","insulinUnitsCurrentBgInfoText","insulinUnitsCurrentBgUnitText","insulinUnitsUnitAdjustmentPercentageLabelText","insulinUnitsUnitAdjustmentPercentageInfoText","insulinUnitsUnitAdjustmentPercentageUnitText","insulinUnitsPersonalisedSettingsButtonText","insulinUnitsTargetBgLabelText","insulinUnitsTargetBgInfoText","insulinUnitsTargetBgUnitText","insulinUnitsCarbsPerUnitLabelText","insulinUnitsCarbsPerUnitInfoText","insulinUnitsCarbsPerUnitText","insulinUnitsBgPerUnitLabelText","insulinUnitsBgPerUnitInfoText","insulinUnitsBgPerUnitUnitText","recordsTitle","recordsResetButtonText","recordsDownloadButtonText","proportionateCarbsTitle","proportionateCarbsUnitText","proportionateCarbsCarbRatioTitle","proportionateCarbsCarbRatioInfoText","proportionateCarbsAddButtonText","proportionateCarbCancelButtonText","proportionateCarbsResetButtonText","proportionateCarbsCarbsPerAmountLabelText","proportionateCarbsCarbsPerAmountUnitText","proportionateCarbsCarbsPerAmountInfoText","proportionateCarbsColumnAmountLabelText","proportionateCarbsColumnAmountUnitText","proportionateCarbsColumnAmountInfoText","proportionateCarbsAmountConsumedTitle","proportionateCarbsAmountConsumedInfoText","proportionateCarbsTotalAmountLabelText","proportionateCarbsTotalAmountUnitText","proportionateCarbsTotalAmountInfoText","proportionateCarbsPortionRatioLabelText","proportionateCarbsPortionRatioInfoText","proportionateCarbsPortionOptions","Fragment","aria-label","value","settingsInsulinUnitsTitle","settingsDefaultCurrentBgLabelText","settingsDefaultCurrentBgInfoText","settingsDefaultCurrentBgUnitText","settingsDefaultUnitAdjustmentPercentageLabelText","settingsDefaultUnitAdjustmentPercentageInfoText","settingsDefaultUnitAdjustmentPercentageUnitText","settingsDefaultTargetBgLabelText","settingsDefaultTargetBgInfoText","settingsDefaultTargetBgUnitText","settingsDefaultCarbsPerUnitLabelText","settingsDefaultCarbsPerUnitInfoText","settingsDefaultCarbsPerUnitUnitText","settingsDefaultBgPerUnitLabelText","settingsDefaultBgPerUnitInfoText","settingsDefaultBgPerUnitUnitText","settingsCarbsPerMealAmountTitle","settingsDefaultColumnAmountLabelText","settingsDefaultColumnAmountInfoText","settingsDefaultColumnAmountUnitText","settingsDefaultTotalPacketAmountLabelText","settingsDefaultTotalPacketAmountInfoText","settingsDefaultTotalPacketAmountUnitText","settingsDefaultPortionRatioLabelText","settingsDefaultPortionRatioInfoText","settingsDefaultPortionOptions","settingsReportTitle","settingsDefaultBasalHalfLifeLabelText","settingsDefaultBasalHalfLifeInfoText","settingsDefaultBasalHalfLifeUnitText","settingsDefaultCarbsHalfLifeLabelText","settingsDefaultCarbsHalfLifeInfoText","settingsDefaultCarbsHalfLifeUnitText","settingsRoundingTitle","settingsDefaultMinimumCarbsLabelText","settingsDefaultMinimumCarbsInfoText","settingsDefaultMinimumCarbsUnitText","settingsDefaultMinimumUnitsLabelText","settingsDefaultMinimumUnitsInfoText","settingsDefaultMinimumUnitsUnitText","warningTitle","warningBody","aboutBody","props","settings","useSelector","state","href","target","version","Boolean","needsUpdating","Button","onClick","window","serviceWorkerRegistration","active","postMessage","addUI","output","key","startsWith","defaultSettings","calculationType","consumedCarbs","currentBg","minimumUnits","basalHalfLife","carbsHalfLife","carbsPerUnit","bgPerUnit","targetBg","unitAdjustmentPercentage","carbsPerColumnAmount","columnAmount","totalPacketAmount","portionRatio","minimumCarbs","lang","defaultInsulinUnits","ui_calculationType","ui_carbsHalfLife","ui_basalHalfLife","ui_consumedCarbs","ui_currentBg","ui_unitAdjustmentPercentage","ui_minimumUnits","ui_carbsPerUnit","ui_bgPerUnit","ui_targetBg","ui_unitAdjustmentRatio","ui_isTaken","bgDistance","bgUnits","carbUnits","totalUnits","adjustedTotalUnits","roundedAdjustedTotalUnits","savedSettings","JSON","parse","localStorage","getItem","savedInsulinUnits","restoredInsulinUnits","initialState","view","title","insulinUnits","proportionateCarbs","ui_carbsPerColumnAmount","ui_columnAmount","ui_totalPacketAmount","ui_portionRatio","ui_minimumCarbs","carbRatio","totalPacketCarbs","roundedConsumedCarbs","records","settingsSlice","createSlice","name","reducers","allSettingsChanged","action","Object","assign","payload","setItem","stringify","actions","viewSlice","titleChanged","round","precision","Math","valueAsString","String","includes","precisionAsString","precisionAfterDecimal","slice","indexOf","truncatedString","length","parseFloat","insulinUnitsSlice","allInsulinUnitsChanged","stateUpdate","isCarb","isCorrection","unitAdjustmentRatio","filter","reduce","sum","min","doUnitMath","markTaken","recordsSlice","recordTakeInsulin","unshift","date","Date","now","recordNoInsulin","resetRecords","removeRecordIndex","splice","doStringMath","str","replace","evaluate","mergeStates","update","merged","err","fromKey","resetStates","makeOnFocusSelect","defaults","dispatch","noui","event","select","makeOnChanged","makeOnBlur","outputContainer","paddingBottom","topButton","marginTop","width","marginBottom","underButton","rawStyles","addCarbs","display","padding","minWidth","makeStyles","InsulinUnits","values","useDispatch","onKeyUp","keyCode","blur","onFocusGotoEndOrSelectZero","setSelectionRange","len","setTimeout","scrollTop","makeOnFocusGotoEndOrSelectZero","onFocusSelect","onChanged","onBlur","useEffect","useState","showConsumedCarbs","setShowConsumedCarbs","showCurrentBG","setShowCurrentBG","showUnitAdjustmentPercentage","setShowUnitAdjustmentPercentage","showTargetBg","setShowTargetBg","showCarbsPerUnit","setShowCarbsPerUnit","showBgPerUnit","setShowBgPerUnit","className","style","Typography","variant","noWrap","flex","disabled","onChange","bind","id","type","checked","htmlFor","Autorenew","TextField","label","Info","Alert","severity","onClose","onFocus","InputProps","startAdornment","InputAdornment","position","Restaurant","endAdornment","component","Link","to","ShowChart","FitnessCenter","Accordion","AccordionSummary","expandIcon","ExpandMore","aria-controls","AccordionDetails","proportionateCarbsSlice","allProportionateCarbsChanged","ProportionateCarbs","insulinUnitsState","showCarbRatio","setShowCarbRatio","showCarbsPerAmount","setShowCarbsPerAmount","showColumnAmount","setShowColumnAmount","showAmountConsumed","setShowAmountConsumed","showTotalAmount","setShowTotalAmount","showPortionRatio","setShowPortionRatio","carbs","Add","MenuOpen","Maximize","Cake","InputLabel","Select","native","inputProps","DataUsage","Records","removeRecord","index","parseInt","getAttribute","getIntensity","time","halflifeHHmm","halfLifeMs","passedIntervals","intensity","pow","oneHour","endDate","midnight","floor","data","map","row","hour","units","glucose","ResponsiveContainer","height","ComposedChart","margin","top","right","bottom","left","CartesianGrid","strokeDasharray","XAxis","dataKey","domain","interval","Label","offset","YAxis","yAxisId","angle","orientation","Tooltip","labelFormatter","toLocaleDateString","weekday","day","month","minute","Legend","ReferenceLine","x","stroke","Bar","fill","Line","a","document","createElement","setAttribute","toISOString","json","btoa","click","downloadData","unitsBackgroundColor","carbsBackgroundColor","backgroundColor","data-index","Settings","showDefaultCurrentBg","setShowDefaultCurrentBg","showDefaultTargetBg","setShowDefaultTargetBg","showDefaultUnitAdjustmentPercentage","setShowDefaultUnitAdjustmentPercentage","showDefaultCarbsPerUnit","setShowDefaultCarbsPerUnit","showDefaultBgPerUnit","setShowDefaultBgPerUnit","showDefaultColumnAmount","setShowDefaultColumnAmount","showDefaultTotalPacketAmount","setShowDefaultTotalPacketAmount","showDefaultBasalHalfLife","setShowDefaultBasalHalfLife","showDefaultCarbsHalfLife","setShowDefaultCarbsHalfLife","showDefaultMinimumCarbs","setShowDefaultMinimumCarbs","showDefaultMinimumUnits","setShowDefaultMinimumUnits","Warning","About","drawerWidth","useStyles","theme","root","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","menuButton","marginLeft","marginRight","hide","flexShrink","whiteSpace","drawerOpen","enteringScreen","drawerClose","overflowX","spacing","toolbar","alignItems","justifyContent","mixins","content","flexGrow","ScrollToTopConnected","withRouter","history","unlisten","listen","scrollTo","App","classes","useTheme","React","open","setOpen","handleDrawerClose","fetch","response","manifest","console","log","AppBar","clsx","appBarShift","Toolbar","path","IconButton","color","edge","Menu","Drawer","paper","direction","ChevronRight","ChevronLeft","Divider","List","ListItem","button","ListItemIcon","ListItemText","primary","SystemUpdate","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","configureStore","reducer","viewReducer","settingsReducer","insulinUnitsReducer","proportionateCarbsReducer","recordsReducer","navigator","addEventListener","serviceWorker","register","registration","location","reload","ready","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.2c993811.chunk.js","sourcesContent":["/* eslint-disable react/jsx-no-target-blank */\r\nimport { Button } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst bgUnit = 'mmol/l';\r\nconst carbUnit = 'g';\r\nconst insulinUnit = 'unit';\r\nconst insulinUnits = 'units';\r\nconst weightVolumeUnit = 'g/ml';\r\nconst percentageUnit = '%';\r\n\r\nexport const en = {\r\n  insulinUnitsTitle: 'Bolus insulin (food)',\r\n  insulinUnitsTakeInsulinButtonText: 'Take',\r\n  insulinUnitsNoInsulinButtonText: 'Don\\'t take',\r\n  insulinUnitsRecordOnlyButtonText: \"Record carbs and glucose\",\r\n  insulinUnitsResetButtonText: 'Reset',\r\n  insulinUnitsUnitText: insulinUnits,\r\n  insulinUnitsAddProportionateCarbsButtonText: 'Add carbs by portion',\r\n  insulinUnitsConsumedCarbsLabelText: 'Consumed carbs',\r\n  insulinUnitsConsumedCarbsInfoText: <div>You can add together the number of carbs you will be eating or drinking here, 14+(16x4).<p>If you click the 'ADD CARBS BY PORTION' button, you will be take to the 'Carbs by portion' calculator.</p></div>,\r\n  insulinUnitsConsumedCarbsUnitText: carbUnit,\r\n  insulinUnitsCurrentBgLabelText: 'Current glucose',\r\n  insulinUnitsCurrentBgInfoText: '',\r\n  insulinUnitsCurrentBgUnitText: bgUnit,\r\n  insulinUnitsUnitAdjustmentPercentageLabelText: \"Insulin efficiency adjustment\",\r\n  insulinUnitsUnitAdjustmentPercentageInfoText: <div>You can reduce the efficacy of your insulin with stress/illness or by sitting down a lot and you can increase your insulin efficacy by exercising more than usual.<p>Example: +20 for stress/illness/sitting, -20 for lots of exercise, -10 for mild exercise.</p></div>,\r\n  insulinUnitsUnitAdjustmentPercentageUnitText: percentageUnit,\r\n  insulinUnitsPersonalisedSettingsButtonText: 'Settings adjustments',\r\n  insulinUnitsTargetBgLabelText: \"Target glucose\",\r\n  insulinUnitsTargetBgInfoText: \"\",\r\n  insulinUnitsTargetBgUnitText: bgUnit,\r\n  insulinUnitsCarbsPerUnitLabelText: \"Carbs per unit\",\r\n  insulinUnitsCarbsPerUnitInfoText: <div>How many carbs do you need, per insulin unit, to correct your blood glucose?<p>Bigger amounts mean less insulin, as you can eat/drink more carbs per unit. Smaller amounts mean more insulin as you can eat/drink fewer carbs per unit.</p></div>,\r\n  insulinUnitsCarbsPerUnitText: carbUnit,\r\n  insulinUnitsBgPerUnitLabelText: \"Glucose correction per unit\",\r\n  insulinUnitsBgPerUnitInfoText: <div>How many mmol/l would your blood glucose reading drop for 1 unit of insulin?<p>Bigger amounts mean less insulin as 1 unit will move your sugar by a larger degree. Smaller amounts mean more insulin.</p></div>,\r\n  insulinUnitsBgPerUnitUnitText: bgUnit,\r\n  recordsTitle: 'Records',\r\n  recordsResetButtonText: 'Reset',\r\n  recordsDownloadButtonText: 'Download json',\r\n  proportionateCarbsTitle: 'Carbs by portion',\r\n  proportionateCarbsUnitText: carbUnit,\r\n  proportionateCarbsCarbRatioTitle: 'Carb ratio of food',\r\n  proportionateCarbsCarbRatioInfoText: 'From the packet or by looking up the carbs in your favourite app, you can enter the number of carbs in the food/drink, usually per 100g (weight) or per 100ml (volume)',\r\n  proportionateCarbsAddButtonText: 'Add to carbs',\r\n  proportionateCarbCancelButtonText: 'Cancel',\r\n  proportionateCarbsResetButtonText: 'Reset',\r\n  proportionateCarbsCarbsPerAmountLabelText: 'Carbs',\r\n  proportionateCarbsCarbsPerAmountUnitText: carbUnit,\r\n  proportionateCarbsCarbsPerAmountInfoText: 'This will usually be listed in the \\'Carbohydrates\\' row on the back of the packet.',\r\n  proportionateCarbsColumnAmountLabelText: 'Per amount',\r\n  proportionateCarbsColumnAmountUnitText: weightVolumeUnit,\r\n  proportionateCarbsColumnAmountInfoText: 'This will usually be listed in the column header on the back of the packet.',\r\n  proportionateCarbsAmountConsumedTitle: 'Amount consumed',\r\n  proportionateCarbsAmountConsumedInfoText: 'This section allows you to apply the ratio above to the amount of food/drink you will be consuming.',\r\n  proportionateCarbsTotalAmountLabelText: 'Total amount',\r\n  proportionateCarbsTotalAmountUnitText: weightVolumeUnit,\r\n  proportionateCarbsTotalAmountInfoText: 'Either the total g/ml of the packet or the total g/ml of the meal stuff (potatoes, pasta, fizzy drink, etc).',\r\n  proportionateCarbsPortionRatioLabelText: 'Portion',\r\n  proportionateCarbsPortionRatioInfoText: 'How much of the total g/ml will you consume?',\r\n  proportionateCarbsPortionOptions: <React.Fragment>\r\n    <option aria-label=\"None\" value={1}>All</option>\r\n    <option value={1/2}>1/2 Half</option>\r\n    <option value={1/3}>1/3 One third</option>\r\n    <option value={1/4}>1/4 One quarter</option>\r\n    <option value={1/5}>1/5 One fifth</option>\r\n    <option value={1/6}>1/6 One sixth</option>\r\n    <option value={1/8}>1/8 One eighth</option>\r\n    <option value={2}>2 Two</option>\r\n    <option value={2/3}>2/3 Two thirds</option>\r\n    <option value={2/5}>2/5 Two fifths</option>\r\n    <option value={3}>3 Three</option>\r\n    <option value={3/4}>3/4 Three quarters</option>\r\n    <option value={3/5}>3/5 Three fifths</option>\r\n    <option value={3/8}>3/8 Three eighths</option>\r\n    <option value={4}>4 Four</option>\r\n    <option value={4/5}>4/5 Four fifths</option>\r\n    <option value={5}>5 Five</option>\r\n    <option value={5/6}>5/6 Five sixths</option>\r\n    <option value={5/8}>5/8 Five eighths</option>\r\n  </React.Fragment>,\r\n  settingsInsulinUnitsTitle: 'Bolus insulin (food)',\r\n  settingsDefaultCurrentBgLabelText: \"Default current glucose\",\r\n  settingsDefaultCurrentBgInfoText: 'The default value should match your \\'Default target glucose\\'.',\r\n  settingsDefaultCurrentBgUnitText: bgUnit,\r\n  settingsDefaultUnitAdjustmentPercentageLabelText: \"Default insulin efficiency adjustment\",\r\n  settingsDefaultUnitAdjustmentPercentageInfoText: <div>You can reduce the efficacy of your insulin with stress/illness or by sitting down a lot and you can increase your insulin efficacy by exercising more than usual.<p>Example: +20 for stress/illness/sitting, -20 for lots of exercise, -10 for mild exercise.</p></div>,\r\n  settingsDefaultUnitAdjustmentPercentageUnitText: percentageUnit,\r\n  settingsDefaultTargetBgLabelText: \"Default target glucose\",\r\n  settingsDefaultTargetBgInfoText: '',\r\n  settingsDefaultTargetBgUnitText: bgUnit,\r\n  settingsDefaultCarbsPerUnitLabelText: \"Default carbs per unit\",\r\n  settingsDefaultCarbsPerUnitInfoText: <div>How many carbs do you need, per insulin unit, to correct your blood glucose?<p>Bigger amounts mean less insulin, as you can eat/drink more carbs per unit. Smaller amounts mean more insulin as you can eat/drink fewer carbs per unit.</p></div>,\r\n  settingsDefaultCarbsPerUnitUnitText: carbUnit,\r\n  settingsDefaultBgPerUnitLabelText: \"Default glucose correction per unit\",\r\n  settingsDefaultBgPerUnitInfoText: <div>How many mmol/l would your blood glucose reading drop for 1 unit of insulin?<p>Bigger amounts mean less insulin as 1 unit will move your sugar by a larger degree. Smaller amounts mean more insulin.</p></div>,\r\n  settingsDefaultBgPerUnitUnitText: bgUnit,\r\n  settingsCarbsPerMealAmountTitle: 'Carbs per portion',\r\n  settingsDefaultColumnAmountLabelText: \"Default per amount\",\r\n  settingsDefaultColumnAmountInfoText: 'This will usually be listed in the column header on the back of the packet.',\r\n  settingsDefaultColumnAmountUnitText: weightVolumeUnit,\r\n  settingsDefaultTotalPacketAmountLabelText: \"Default total amount\",\r\n  settingsDefaultTotalPacketAmountInfoText: 'Should match the \\'Default per amount\\'',\r\n  settingsDefaultTotalPacketAmountUnitText: weightVolumeUnit,\r\n  settingsDefaultPortionRatioLabelText: \"Default portion\",\r\n  settingsDefaultPortionRatioInfoText: '',\r\n  settingsDefaultPortionOptions: <React.Fragment>\r\n    <option aria-label=\"None\" value={1}>All</option>\r\n    <option value={1/2}>1/2 Half</option>\r\n    <option value={1/3}>1/3 One third</option>\r\n    <option value={1/4}>1/4 One quarter</option>\r\n    <option value={1/5}>1/5 One fifth</option>\r\n    <option value={1/6}>1/6 One sixth</option>\r\n    <option value={1/8}>1/8 One eighth</option>\r\n    <option value={2}>2 Two</option>\r\n    <option value={2/3}>2/3 Two thirds</option>\r\n    <option value={2/5}>2/5 Two fifths</option>\r\n    <option value={3}>3 Three</option>\r\n    <option value={3/4}>3/4 Three quarters</option>\r\n    <option value={3/5}>3/5 Three fifths</option>\r\n    <option value={3/8}>3/8 Three eighths</option>\r\n    <option value={4}>4 Four</option>\r\n    <option value={4/5}>4/5 Four fifths</option>\r\n    <option value={5}>5 Five</option>\r\n    <option value={5/6}>5/6 Five sixths</option>\r\n    <option value={5/8}>5/8 Five eighths</option>\r\n  </React.Fragment>,\r\n  settingsReportTitle: 'Report',\r\n  settingsDefaultBasalHalfLifeLabelText: 'Basal half-life',\r\n  settingsDefaultBasalHalfLifeInfoText: 'Enter the half-life for your basal insulin to show which doses are still active in the Report screen.',\r\n  settingsDefaultBasalHalfLifeUnitText: 'hh:mm',\r\n  settingsDefaultCarbsHalfLifeLabelText: 'Carbs half-life',\r\n  settingsDefaultCarbsHalfLifeInfoText: 'Enter the half-life for your carbs to show food whist is still active in the Report screen.',\r\n  settingsDefaultCarbsHalfLifeUnitText: 'hh:mm',\r\n  settingsRoundingTitle: 'Rounding',\r\n  settingsDefaultMinimumCarbsLabelText: \"Minimum carbs\",\r\n  settingsDefaultMinimumCarbsInfoText: 'Carbs will be rounded to this value.',\r\n  settingsDefaultMinimumCarbsUnitText: carbUnit,\r\n  settingsDefaultMinimumUnitsLabelText: \"Minimum units\",\r\n  settingsDefaultMinimumUnitsInfoText: 'Units will be rounded to this value.',\r\n  settingsDefaultMinimumUnitsUnitText: insulinUnit,\r\n  warningTitle: 'WARNING:',\r\n  warningBody: <React.Fragment>\r\n    This app is to be used only as an <b>indication</b> of dosage amounts.\r\n    <p>\r\n      It is imperative that the user understands how to use the app and accepts liability for its use. The author accepts no liability for loss or damage resulting from the use of this app.\r\n    </p>\r\n    <p>\r\n      Please make sure you understand, set and appropriately adjust your \"<b>Default glucose correction per unit</b>\" and \"<b>Default carbs per unit</b>\" amounts in the settings panel before using this app.\r\n    </p>\r\n    <p>\r\n      The bolus insulin calculator <b>DOES NOT</b> take into account rising and falling of your blood glucose over time, as it is not connected to your blood glucose meter. You <b>MUST</b> adjust your units manually.\r\n    </p>\r\n    <p>\r\n      It is advised to start with the correct <b>BASAL</b> insulin first. This could take you more than one day. To do this you should eat a no-carb evening meal or fast on your evening meal. Adjust your basal insulin until your blood glucose is flat over night, which you will see/monitor in the mornings. Make sure to do this when you are not ill, stressed, eating/drinking irregularly or doing abnormal amounts of exercise, you need a baseline basal that you can adjust later.\r\n    </p>\r\n    <p>\r\n      Once your basal insulin dose is correct, you can change your <i>default carbohydrates per unit</i> and <i>default glucose correction per unit</i> to best suit your own meal times and corrections. A bigger <i>carbs per unit</i> and <i>glucose per unit</i> value will mean less insulin, a smaller value will mean more insulin.\r\n    </p>\r\n  </React.Fragment>,\r\n  aboutBody: function AboutBody(props) {\r\n    const settings = useSelector(state => state.settings)\r\n    return <React.Fragment>\r\n      <div>\r\n        <p>\r\n          This is a product demo for an upcoming app. Please do not share the link unless given express permission from the author.\r\n        </p>\r\n        <p>\r\n          Author: <a href=\"https://oliverfoster.co.uk/about\" target=\"_blank\">Oliver Foster</a><br />\r\n          Version: {settings.version}<br />\r\n          Update available: {Boolean(settings.needsUpdating) ? \"Yes\" : \"No\"}\r\n          <br />\r\n          {settings.needsUpdating &&\r\n            <Button onClick={() => {\r\n              window.serviceWorkerRegistration.active.postMessage('update')\r\n            }}>Update now</Button>\r\n          }\r\n        </p>\r\n        <p>\r\n          Leave feedback or requests using the form at <a href=\"https://oliverfoster.co.uk/contact\" target=\"_blank\">oliverfoster.co.uk/contact</a>. Make sure to say that your message is regarding the <b>diabetes calculator</b>.\r\n        </p>\r\n        <p>\r\n          Copyright © 2023, Oliver Foster<br />\r\n        </p>\r\n      </div>\r\n    </React.Fragment>\r\n  }\r\n}\r\n","import { en } from './en'\r\n\r\nexport const langs = {\r\n  en\r\n}\r\n","const version = \"0.0.31\";\n\nfunction addUI(settings) {\n  if (!settings) return settings;\n  const output = {};\n  for (const key in settings) {\n    if (key.startsWith('ui_')) continue;\n    output[key] = settings[key]\n    output[`ui_${key}`] = settings[key]\n  }\n  return output\n}\n\nfunction removeVersion(settings) {\n  return {...settings, version: null}\n}\n\nexport const defaultSettings = addUI({\n  version,\n  needsUpdating: false,\n  calculationType: 'both',\n  consumedCarbs: 0,\n  currentBg: 5,\n  minimumUnits: 0.1,\n  basalHalfLife: \"\",\n  carbsHalfLife: \"00:30\",\n  carbsPerUnit: 0,\n  bgPerUnit: 0,\n  targetBg: 5,\n  unitAdjustmentPercentage: 0,\n  carbsPerColumnAmount: 0,\n  columnAmount: 100,\n  totalPacketAmount: 100,\n  portionRatio: 1,\n  minimumCarbs: 0.1,\n  lang: 'en'\n});\n\nexport const defaultInsulinUnits = {\n  ui_calculationType: null,\n  consumedCarbs: null,\n  currentBg: null,\n  unitAdjustmentPercentage: null,\n  minimumUnits: null,\n  carbsPerUnit: null,\n  bgPerUnit: null,\n  targetBg: null,\n  basalHalfLife: null,\n  carbsHalfLife: null,\n  ui_carbsHalfLife: null,\n  ui_basalHalfLife: null,\n  ui_consumedCarbs: null,\n  ui_currentBg: null,\n  ui_unitAdjustmentPercentage: null,\n  ui_minimumUnits: null,\n  ui_carbsPerUnit: null,\n  ui_bgPerUnit: null,\n  ui_targetBg: null,\n  ui_unitAdjustmentRatio: 0,\n  ui_isTaken: false,\n  bgDistance: 0,\n  bgUnits: 0,\n  carbUnits: 0,\n  totalUnits: 0,\n  adjustedTotalUnits: 0,\n  roundedAdjustedTotalUnits: 0\n}\n\nconst savedSettings = removeVersion(addUI(JSON.parse(localStorage.getItem('settings') || 'null')) || {});\nfor (const key in defaultSettings) {\n  savedSettings[key] = savedSettings?.[key] ?? defaultSettings[key];\n}\nconst savedInsulinUnits = JSON.parse(localStorage.getItem('insulinUnits') || '{}')\nconst restoredInsulinUnits = {}\nfor (const key in defaultInsulinUnits) {\n  restoredInsulinUnits[key] = savedInsulinUnits?.[key] ?? defaultInsulinUnits[key];\n}\nconst savedRecords = JSON.parse(localStorage.getItem('records') || '[]');\n\nexport const initialState = {\n  view: {\n    title: ''\n  },\n  settings: savedSettings,\n  insulinUnits: restoredInsulinUnits,\n  proportionateCarbs: {\n    carbsPerColumnAmount: null,\n    columnAmount: null,\n    totalPacketAmount: null,\n    portionRatio: null,\n    minimumCarbs: null,\n    ui_carbsPerColumnAmount: null,\n    ui_columnAmount: null,\n    ui_totalPacketAmount: null,\n    ui_portionRatio: null,\n    ui_minimumCarbs: null,\n    ui_isTaken: false,\n    carbRatio: 0,\n    totalPacketCarbs: 0,\n    consumedCarbs: 0,\n    roundedConsumedCarbs: 0\n  },\n  records: savedRecords\n}\n","import { createSlice } from '@reduxjs/toolkit'\nimport { initialState } from './initialState'\n\nconst settingsSlice = createSlice({\n  name: 'settings',\n  initialState: initialState.settings,\n  reducers: {\n    allSettingsChanged(state, action) {\n      Object.assign(state, action.payload)\n      localStorage.setItem('settings', JSON.stringify(state, null, 2))\n    }\n  }\n})\n\nexport const {\n  allSettingsChanged\n} = settingsSlice.actions\n\nexport default settingsSlice.reducer\n","import { createSlice } from '@reduxjs/toolkit'\nimport { initialState } from './initialState'\n\nconst viewSlice = createSlice({\n  name: 'view',\n  initialState: initialState.view,\n  reducers: {\n    titleChanged(state, action) {\n      state.title = action.payload\n    }\n  }\n})\n\nexport const {\n  titleChanged\n} = viewSlice.actions\n\nexport default viewSlice.reducer\n","export default function round(value, precision) {\r\n  value = Math.round(value / precision) * precision\r\n  const valueAsString = String(value)\r\n  if (valueAsString.includes('.')) {\r\n    const precisionAsString = String(precision)\r\n    const precisionAfterDecimal = precisionAsString.slice(precisionAsString.indexOf('.') + 1)\r\n    const truncatedString = valueAsString.slice(0, valueAsString.indexOf('.') + 1 + precisionAfterDecimal.length)\r\n    return parseFloat(truncatedString)\r\n  }\r\n  return value\r\n}\r\n","import { createSlice } from '@reduxjs/toolkit'\nimport round from '../utils/round'\nimport min from '../utils/min'\nimport { initialState } from './initialState'\n\nconst doUnitMath = (state, stateUpdate) => {\n  Object.assign(state, stateUpdate)\n\n  const calculationType = state.ui_calculationType\n  const isCarb = (calculationType === 'both' || calculationType === 'carbs')\n  const isCorrection = (calculationType === 'both' || calculationType === 'correction')\n\n  const consumedCarbs = state.consumedCarbs\n  const currentBg = state.currentBg\n  const unitAdjustmentPercentage = state.unitAdjustmentPercentage\n  const targetBg = state.targetBg\n  const carbsPerUnit = state.carbsPerUnit\n  const bgPerUnit = state.bgPerUnit\n  const minimumUnits = state.minimumUnits\n\n  const unitAdjustmentRatio = 1 + (unitAdjustmentPercentage / 100)\n  const bgDistance = (currentBg - targetBg)\n  const bgUnits = bgPerUnit ? (bgDistance / bgPerUnit) : 0\n  const carbUnits = carbsPerUnit ? (consumedCarbs / carbsPerUnit) : 0\n\n  const totalUnits = [\n    isCarb && carbUnits,\n    isCorrection && bgUnits\n  ].filter(Boolean).reduce((sum, value) => sum + value, 0)\n  const adjustedTotalUnits = (totalUnits * unitAdjustmentRatio)\n  const roundedAdjustedTotalUnits = min(round(adjustedTotalUnits, minimumUnits))\n\n  Object.assign(state, {\n    unitAdjustmentRatio,\n    bgDistance,\n    bgUnits,\n    carbUnits,\n    totalUnits,\n    adjustedTotalUnits,\n    roundedAdjustedTotalUnits\n  })\n\n}\n\nconst insulinUnitsSlice = createSlice({\n  name: 'insulinUnits',\n  initialState: initialState.insulinUnits,\n  reducers: {\n    allInsulinUnitsChanged(state, action) {\n      doUnitMath(state, action.payload)\n      localStorage.setItem('insulinUnits', JSON.stringify(state, null, 2))\n    },\n    markTaken(state, action) {\n      state.ui_isTaken = true\n      localStorage.setItem('insulinUnits', JSON.stringify(state, null, 2))\n    }\n  }\n})\n\nexport const {\n  allInsulinUnitsChanged,\n  markTaken\n} = insulinUnitsSlice.actions\n\nexport default insulinUnitsSlice.reducer\n","export default function min(value, min = 0) {\r\n  return value < min ? min : value;\r\n}\r\n","import { createSlice } from '@reduxjs/toolkit'\r\nimport { initialState } from './initialState'\r\n\r\nconst recordsSlice = createSlice({\r\n  name: 'records',\r\n  initialState: initialState.records,\r\n  reducers: {\r\n    recordTakeInsulin(state, action) {\r\n      const {\r\n        ui_calculationType,\r\n        consumedCarbs,\r\n        currentBg,\r\n        unitAdjustmentPercentage,\r\n        minimumUnits,\r\n        carbsPerUnit,\r\n        bgPerUnit,\r\n        targetBg,\r\n        unitAdjustmentRatio,\r\n        bgDistance,\r\n        bgUnits,\r\n        carbUnits,\r\n        totalUnits,\r\n        adjustedTotalUnits,\r\n        roundedAdjustedTotalUnits\r\n      } = action.payload\r\n      state.unshift({\r\n        date: Date.now(),\r\n        calculationType: ui_calculationType,\r\n        consumedCarbs,\r\n        currentBg,\r\n        unitAdjustmentPercentage,\r\n        minimumUnits,\r\n        carbsPerUnit,\r\n        bgPerUnit,\r\n        targetBg,\r\n        unitAdjustmentRatio,\r\n        bgDistance,\r\n        bgUnits,\r\n        carbUnits,\r\n        totalUnits,\r\n        adjustedTotalUnits,\r\n        roundedAdjustedTotalUnits\r\n      })\r\n      localStorage.setItem('records', JSON.stringify(state, null, 2))\r\n    },\r\n    recordNoInsulin(state, action) {\r\n      const {\r\n        consumedCarbs,\r\n        currentBg,\r\n        unitAdjustmentPercentage,\r\n        minimumUnits,\r\n        carbsPerUnit,\r\n        bgPerUnit,\r\n        targetBg,\r\n        unitAdjustmentRatio,\r\n        bgDistance\r\n      } = action.payload\r\n      state.unshift({\r\n        date: Date.now(),\r\n        consumedCarbs,\r\n        currentBg,\r\n        unitAdjustmentPercentage,\r\n        minimumUnits,\r\n        carbsPerUnit,\r\n        bgPerUnit,\r\n        targetBg,\r\n        unitAdjustmentRatio,\r\n        bgDistance,\r\n        calculationType: null,\r\n        bgUnits: 0,\r\n        carbUnits: 0,\r\n        totalUnits: 0,\r\n        adjustedTotalUnits: 0,\r\n        roundedAdjustedTotalUnits: 0\r\n      })\r\n      localStorage.setItem('records', JSON.stringify(state, null, 2))\r\n    },\r\n    resetRecords(state) {\r\n      state.length = 0\r\n      localStorage.setItem('records', JSON.stringify(state, null, 2))\r\n    },\r\n    removeRecordIndex(state, action) {\r\n      state.splice(action.payload, 1)\r\n      localStorage.setItem('records', JSON.stringify(state, null, 2))\r\n    }\r\n  }\r\n})\r\n\r\nexport const {\r\n  recordTakeInsulin,\r\n  recordNoInsulin,\r\n  resetRecords,\r\n  removeRecordIndex\r\n} = recordsSlice.actions\r\n\r\nexport default recordsSlice.reducer\r\n","import { evaluate } from 'mathjs'\n\nexport default function doStringMath(str) {\n  str = String(str)\n  if (str.includes(':')) return str\n  str = str.replace(/x/i, '*')\n  return evaluate(str)\n}\n","import doStringMath from './doStringMath';\n\nexport default function mergeStates(state, settings, update = {}) {\n  state = {...state}\n  update = {...update}\n  const merged = {}\n  for (const key in update) {\n    // do math only on non ui values\n    try {\n      update[key] = key.startsWith('ui_') ? update[key] : doStringMath(update[key])\n    } catch (err) {\n      // Ignore mid-math errors\n      delete update[key]\n    }\n  }\n  for (const key in update) {\n    const fromKey = key.startsWith('ui_') ? key.slice(3) : key;\n    // if updated value matches settings then remove\n    if (update[key] === settings[fromKey]) {\n      update[key] = null;\n      state[key] = null;\n      merged[key] = null;\n    }\n  }\n  for (const key in state) {\n    const fromKey = key.startsWith('ui_') ? key.slice(3) : key;\n    // output final value filling in defaults\n    merged[key] = update[key] ?? state[key] ?? settings[fromKey]\n  }\n  return merged\n}\n","import doStringMath from './doStringMath';\r\n\r\nexport default function resetStates(state, settings) {\r\n  state = {...state}\r\n  const update = {};\r\n  for (const key in state) {\r\n    if (!key.startsWith('ui_')) continue;\r\n    const fromKey = key.slice(3)\r\n    update[key] = settings[fromKey]\r\n    update[fromKey] = settings[fromKey]\r\n  }\r\n  const merged = {}\r\n  for (const key in update) {\r\n    // do math only on non ui values\r\n    try {\r\n      update[key] = key.startsWith('ui_') ? update[key] : doStringMath(update[key])\r\n    } catch (err) {\r\n      // Ignore mid-math errors\r\n      delete update[key]\r\n    }\r\n  }\r\n  for (const key in update) {\r\n    const fromKey = key.startsWith('ui_') ? key.slice(3) : key;\r\n    // if updated value matches settings then remove\r\n    if (update[key] === settings[fromKey]) {\r\n      update[key] = null;\r\n      state[key] = null;\r\n      merged[key] = null;\r\n    }\r\n  }\r\n  for (const key in state) {\r\n    const fromKey = key.startsWith('ui_') ? key.slice(3) : key;\r\n    // output final value filling in defaults\r\n    merged[key] = update[key] ?? state[key] ?? settings[fromKey]\r\n  }\r\n  return merged\r\n}\r\n","export default function makeOnFocusSelect(defaults, dispatch, action, { noui = false } = {}) {\n  return (name, event) => {\n    event.target.select();\n  }\n}\n","import mergeStates from \"./mergeStates\"\n\nexport default function makeOnChanged(state, settings, dispatch, action, { noui = false } = {}) {\n  return (name, event) => {\n    const value = event.target.value\n    try {\n      dispatch(\n        action(mergeStates(\n          state,\n          settings,\n          noui\n          ? {\n            [name]: value || settings[name]\n          }\n          : {\n            [name]: value || settings[name],\n            [`ui_${name}`]: value\n          }\n        ))\n      )\n    } catch (err) {}\n  }\n}\n","export default function makeOnBlur(defaults, dispatch, action, { noui = false } = {}) {\n  return (name, event) => {\n    const value = event.target.value\n    if (value !== \"\") return;\n    dispatch(\n      action(\n        noui\n        ? {\n          [name]: defaults[name],\n        }\n        : {\n          [name]: defaults[name],\n          [`ui_${name}`]: defaults[name]\n        }\n      )\n    )\n  }\n}\n","import { makeStyles } from '@material-ui/core/styles';\n\nconst outputContainer = {\n  paddingBottom: '0em'\n}\n\nconst addCarbs = {\n  display: 'inline-flex',\n  padding: '6px 0px',\n  minWidth: '32px'\n}\n\nconst topButton = {\n  marginTop: '1em',\n  width: '100%',\n  marginBottom: '0em'\n}\n\nconst underButton = {\n  marginTop: '0em',\n  width: '100%',\n  marginBottom: '0em'\n}\n\nconst rawStyles = {\n  addCarbs,\n  outputContainer,\n  topButton\n};\n\nconst styles = makeStyles(rawStyles);\n\nexport default styles\n\nexport {\n  addCarbs,\n  outputContainer,\n  topButton,\n  underButton\n}\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux'\nimport {\n  Link\n} from \"react-router-dom\";\nimport { TextField, Typography, InputAdornment, Button, Accordion, AccordionSummary, AccordionDetails } from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport { titleChanged } from './store/view';\nimport { allInsulinUnitsChanged, markTaken } from './store/insulinUnits'\nimport { recordTakeInsulin, recordNoInsulin } from './store/records'\nimport mergeStates from './utils/mergeStates'\nimport resetStates from './utils/resetStates';\nimport makeOnFocusSelect from './utils/makeOnFocusSelect';\nimport makeOnFocusGotoEndOrSelectZero from './utils/makeOnFocusGotoEndOrSelectZero';\nimport makeOnChanged from './utils/makeOnChanged';\nimport makeOnBlur from './utils/makeOnBlur'\nimport {\n  outputContainer,\n  topButton,\n  underButton\n} from './utils/styles';\nimport {\n  Restaurant as RestaurantIcon,\n  ExpandMore as ExpandMoreIcon,\n  ShowChart as ShowChartIcon,\n  FitnessCenter as FitnessCenterIcon,\n  Settings as SettingsIcon,\n  Autorenew as AutorenewIcon,\n  Speed as ProportionateCarbsButtonIcon,\n  Info as InfoIcon,\n  Check as TakeIcon,\n  Close as DontTakeIcon,\n  ChevronRight as RecordOnlyIcon\n} from '@material-ui/icons'\nimport { langs } from './lang/langs';\n\nexport const InsulinUnits = () => {\n  const state = useSelector(state => state.insulinUnits)\n  const settings = useSelector(state => state.settings)\n  const lang = langs[settings.lang]\n  const values = mergeStates(state, settings)\n  const dispatch = useDispatch()\n\n  const onKeyUp = (event) => {\n    if (event.keyCode !== 13) return;\n    event.target.blur()\n  }\n  const onFocusGotoEndOrSelectZero = makeOnFocusGotoEndOrSelectZero()\n  const onFocusSelect = makeOnFocusSelect()\n  const onChanged = makeOnChanged(state, settings, dispatch, allInsulinUnitsChanged)\n  const onBlur = makeOnBlur(settings, dispatch, allInsulinUnitsChanged)\n\n  useEffect(() => {\n    dispatch(\n      titleChanged(lang.insulinUnitsTitle)\n    )\n  })\n\n  // Information icons\n  const [showConsumedCarbs, setShowConsumedCarbs] = useState(false)\n  const [showCurrentBG, setShowCurrentBG] = useState(false)\n  const [showUnitAdjustmentPercentage, setShowUnitAdjustmentPercentage] = useState(false)\n  const [showTargetBg, setShowTargetBg] = useState(false)\n  const [showCarbsPerUnit, setShowCarbsPerUnit] = useState(false)\n  const [showBgPerUnit, setShowBgPerUnit] = useState(false)\n\n  const calculationType = state.ui_calculationType ?? settings.calculationType\n\n  return (\n    <React.Fragment>\n    <section className=\"insulinunits screen__container\">\n\n      <div className=\"insulinunits__output\" style={outputContainer}>\n        <Typography variant=\"h2\" noWrap>\n          {state.roundedAdjustedTotalUnits||0}{lang.insulinUnitsUnitText}\n        </Typography>\n      </div>\n\n      <div className=\"insulinunits__calculation_type\" style={{display:'flex', marginTop: '1em'}}>\n        <div style={{ flex: 1 }}><input\n              disabled={state.ui_isTaken} onChange={onChanged.bind(this, 'calculationType')} id=\"calc_type_carbs\" name=\"calc_type\" type=\"radio\" value=\"carbs\" checked={calculationType === \"carbs\"} /><label htmlFor=\"calc_type_carbs\">Carbs</label></div>\n        <div style={{ flex: 1 }}><input\n              disabled={state.ui_isTaken} onChange={onChanged.bind(this, 'calculationType')} id=\"calc_type_correction\" name=\"calc_type\" type=\"radio\" value=\"correction\" checked={calculationType === \"correction\"} /><label htmlFor=\"calc_type_correction\">Correction</label></div>\n        <div style={{ flex: 2 }}><input\n              disabled={state.ui_isTaken} onChange={onChanged.bind(this, 'calculationType')} id=\"calc_type_both\" name=\"calc_type\" type=\"radio\" value=\"both\" checked={calculationType === \"both\"}/><label htmlFor=\"calc_type_both\">Carbs and Correction</label></div>\n      </div>\n\n      <div className=\"insulinunits__button__take\" style={{display: 'flex'}}>\n        <Button\n          className='button'\n          style={topButton}\n          disabled={state.ui_isTaken || state.roundedAdjustedTotalUnits === 0}\n          onClick={\n            () => {\n              dispatch(recordNoInsulin(state))\n              dispatch(markTaken(state))\n            }\n          }\n        >\n          <DontTakeIcon />\n          &nbsp;{lang.insulinUnitsNoInsulinButtonText}\n        </Button>\n        <Button\n          className='button'\n          style={topButton}\n          disabled={state.ui_isTaken || state.roundedAdjustedTotalUnits === 0}\n          onClick={\n            () => {\n              dispatch(recordTakeInsulin(state))\n              dispatch(markTaken(state))\n            }\n          }\n        >\n          <TakeIcon />\n          &nbsp;{lang.insulinUnitsTakeInsulinButtonText}\n        </Button>\n      </div>\n      <div>\n        <Button\n            className='button'\n            style={underButton}\n            disabled={state.ui_isTaken}\n            onClick={\n              () => {\n                dispatch(recordNoInsulin(state))\n                dispatch(markTaken(state))\n              }\n            }\n          >\n            <RecordOnlyIcon />\n            &nbsp;{lang.insulinUnitsRecordOnlyButtonText}\n          </Button>\n      </div>\n      <div className=\"insulinunits__button__reset\">\n        <Button\n          className='button'\n          style={topButton}\n          onClick={\n            () => {\n              dispatch(allInsulinUnitsChanged(resetStates(\n                state,\n                settings\n              )))\n            }\n          }\n        >\n          <AutorenewIcon />\n          &nbsp;{lang.insulinUnitsResetButtonText}\n        </Button>\n      </div>\n\n      <div className=\"insulinunits_input input__group\">\n\n        <div className=\"insulinunits__input__consumedcarbs input__container\">\n          <TextField label={<div>\n            {lang.insulinUnitsConsumedCarbsLabelText}\n            {lang.insulinUnitsConsumedCarbsInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowConsumedCarbs(!showConsumedCarbs)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showConsumedCarbs ? 'flex':'none'}} onClose={() => setShowConsumedCarbs(false)}>\n                {lang.insulinUnitsConsumedCarbsInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            disabled={state.ui_isTaken}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusGotoEndOrSelectZero.bind(this, 'consumedCarbs')}\n            onChange={onChanged.bind(this, 'consumedCarbs')}\n            onBlur={onBlur.bind(this, 'consumedCarbs')}\n            value={values.ui_consumedCarbs}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><RestaurantIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{state.consumedCarbs||0}{lang.insulinUnitsConsumedCarbsUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"insulinunits__button__addproportionatecarbs\">\n          <Button\n              disabled={state.ui_isTaken}\n              className='button'\n              style={topButton}\n              component={Link} to=\"/proportionatecarbs\"\n            >\n              <ProportionateCarbsButtonIcon />\n              &nbsp;{lang.insulinUnitsAddProportionateCarbsButtonText}\n            </Button>\n        </div>\n\n        <div className=\"insulinunits__input__currentbg input__container\">\n          <TextField label={<div>\n            {lang.insulinUnitsCurrentBgLabelText}\n            {lang.insulinUnitsCurrentBgInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowCurrentBG(!showCurrentBG)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showCurrentBG ? 'flex':'none'}} onClose={() => setShowCurrentBG(false)}>\n                {lang.insulinUnitsCurrentBgInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            disabled={state.ui_isTaken}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'currentBg')}\n            onChange={onChanged.bind(this, 'currentBg')}\n            onBlur={onBlur.bind(this, 'currentBg')}\n            value={values.ui_currentBg}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><ShowChartIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.insulinUnitsCurrentBgUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"insulinunits__input__unitadjustmentpercentage input__container\">\n          <TextField label={<div>\n            {lang.insulinUnitsUnitAdjustmentPercentageLabelText}\n            {lang.insulinUnitsUnitAdjustmentPercentageInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowUnitAdjustmentPercentage(!showUnitAdjustmentPercentage)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showUnitAdjustmentPercentage ? 'flex':'none'}} onClose={() => setShowUnitAdjustmentPercentage(false)}>\n                {lang.insulinUnitsUnitAdjustmentPercentageInfoText}\n              </Alert>\n            </React.Fragment>\n            }\n          </div>}\n            disabled={state.ui_isTaken}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'unitAdjustmentPercentage')}\n            onChange={onChanged.bind(this, 'unitAdjustmentPercentage')}\n            onBlur={onBlur.bind(this, 'unitAdjustmentPercentage')}\n            value={values.ui_unitAdjustmentPercentage}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><FitnessCenterIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.insulinUnitsUnitAdjustmentPercentageUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"panel1a-content\"\n            id=\"panel1a-header\"\n          >\n            <SettingsIcon />\n            &nbsp;{lang.insulinUnitsPersonalisedSettingsButtonText}\n          </AccordionSummary>\n          <AccordionDetails>\n\n            <div className=\"insulinunits__input__targetbg input__container\">\n              <TextField label={<div>\n                {lang.insulinUnitsTargetBgLabelText}\n                {lang.insulinUnitsTargetBgInfoText &&\n                <React.Fragment>\n                  <Button className=\"btn-info\" onClick={() => setShowTargetBg(!showTargetBg)}>\n                    <InfoIcon />\n                  </Button>\n                  <Alert severity=\"info\" className=\"info\" style={{display: showTargetBg ? 'flex':'none'}} onClose={() => setShowTargetBg(false)}>\n                    {lang.insulinUnitsTargetBgInfoText}\n                  </Alert>\n                </React.Fragment>\n                }\n              </div>}\n                disabled={state.ui_isTaken}\n                onKeyUp={onKeyUp}\n                onFocus={onFocusSelect.bind(this, 'targetBg')}\n                onChange={onChanged.bind(this, 'targetBg')}\n                onBlur={onBlur.bind(this, 'targetBg')}\n                value={values.ui_targetBg}\n                InputProps={{\n                  startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n                  endAdornment: <InputAdornment position=\"end\">{lang.insulinUnitsTargetBgUnitText}</InputAdornment>,\n                }}\n              />\n            </div>\n\n            <div className=\"insulinunits__input__carbsperunit input__container\">\n              <TextField label={<div>\n                {lang.insulinUnitsCarbsPerUnitLabelText}\n                {lang.insulinUnitsCarbsPerUnitInfoText &&\n                  <React.Fragment>\n                  <Button className=\"btn-info\" onClick={() => setShowCarbsPerUnit(!showCarbsPerUnit)}>\n                    <InfoIcon />\n                  </Button>\n                  <Alert severity=\"info\" className=\"info\" style={{display: showCarbsPerUnit ? 'flex':'none'}} onClose={() => setShowCarbsPerUnit(false)}>\n                    {lang.insulinUnitsCarbsPerUnitInfoText}\n                  </Alert>\n                  </React.Fragment>\n                }\n              </div>}\n                disabled={state.ui_isTaken}\n                onKeyUp={onKeyUp}\n                onFocus={onFocusSelect.bind(this, 'carbsPerUnit')}\n                onChange={onChanged.bind(this, 'carbsPerUnit')}\n                onBlur={onBlur.bind(this, 'carbsPerUnit')}\n                value={values.ui_carbsPerUnit}\n                InputProps={{\n                  startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n                  endAdornment: <InputAdornment position=\"end\">{lang.insulinUnitsCarbsPerUnitText}</InputAdornment>,\n                }}\n              />\n            </div>\n\n            <div className=\"insulinunits__input__bgperunit input__container\">\n              <TextField label={<div>\n                {lang.insulinUnitsBgPerUnitLabelText}\n                {lang.insulinUnitsBgPerUnitInfoText &&\n                  <React.Fragment>\n                    <Button className=\"btn-info\" onClick={() => setShowBgPerUnit(!showBgPerUnit)}>\n                      <InfoIcon />\n                    </Button>\n                    <Alert severity=\"info\" className=\"info\" style={{display: showBgPerUnit ? 'flex':'none'}} onClose={() => setShowBgPerUnit(false)}>\n                      {lang.insulinUnitsBgPerUnitInfoText}\n                    </Alert>\n                  </React.Fragment>\n                }\n              </div>}\n                disabled={state.ui_isTaken}\n                onKeyUp={onKeyUp}\n                onFocus={onFocusSelect.bind(this, 'bgPerUnit')}\n                onChange={onChanged.bind(this, 'bgPerUnit')}\n                onBlur={onBlur.bind(this, 'bgPerUnit')}\n                value={values.ui_bgPerUnit}\n                InputProps={{\n                  startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n                  endAdornment: <InputAdornment position=\"end\">{lang.insulinUnitsBgPerUnitUnitText}</InputAdornment>,\n                }}\n              />\n            </div>\n          </AccordionDetails>\n        </Accordion>\n\n      </div>\n\n    </section>\n  </React.Fragment>\n  )\n}\n","export default function makeOnFocusGotoEndOrSelectZero(defaults, dispatch, action, { noui = false } = {}) {\n  return (name, event) => {\n    const value = event.target.value\n    if (value === \"0\") {\n      event.target.select();\n      return\n    }\n    if (event.target.setSelectionRange) {\n      var len = event.target.value.length * 2;\n      setTimeout(() => {\n        event.target.setSelectionRange(len, len);\n      }, 0)\n    } else {\n      event.target.value = ''\n      event.target.value = value\n    }\n    event.target.scrollTop = 99999\n  }\n}\n","import { createSlice } from '@reduxjs/toolkit'\nimport round from '../utils/round'\nimport { initialState } from './initialState'\n\nconst doUnitMath = (state, stateUpdate) => {\n  Object.assign(state, stateUpdate)\n\n  const carbsPerColumnAmount = state.carbsPerColumnAmount\n  const columnAmount = state.columnAmount\n  const totalPacketAmount = state.totalPacketAmount\n  const portionRatio = state.portionRatio;\n  const minimumCarbs = state.minimumCarbs\n\n  const carbRatio = columnAmount ? (carbsPerColumnAmount / columnAmount) : 0\n  const totalPacketCarbs = carbRatio * totalPacketAmount\n  const consumedCarbs = (totalPacketCarbs * portionRatio);\n\n  const roundedConsumedCarbs = round(consumedCarbs, minimumCarbs)\n\n  Object.assign(state, {\n    carbRatio,\n    totalPacketCarbs,\n    consumedCarbs,\n    roundedConsumedCarbs\n  })\n\n}\n\nconst proportionateCarbsSlice = createSlice({\n  name: 'proportionateCarbs',\n  initialState: initialState.proportionateCarbs,\n  reducers: {\n    allProportionateCarbsChanged(state, action) {\n      doUnitMath(state, action.payload)\n    }\n  }\n})\n\nexport const {\n  allProportionateCarbsChanged\n} = proportionateCarbsSlice.actions\n\nexport default proportionateCarbsSlice.reducer\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux'\nimport {\n  Link\n} from \"react-router-dom\";\nimport { Typography, TextField, InputAdornment, Button, Select, InputLabel } from '@material-ui/core'\nimport Alert from '@material-ui/lab/Alert';\nimport { titleChanged } from './store/view';\nimport { allInsulinUnitsChanged } from './store/insulinUnits';\nimport { allProportionateCarbsChanged } from './store/proportionateCarbs'\nimport mergeStates from './utils/mergeStates'\nimport makeOnFocusSelect from './utils/makeOnFocusSelect';\nimport makeOnChanged from './utils/makeOnChanged';\nimport makeOnBlur from './utils/makeOnBlur'\nimport {\n  outputContainer,\n  topButton\n} from './utils/styles';\nimport {\n  ArrowBack as CloseIcon,\n  Maximize as MaximizeIcon,\n  MenuOpen as MenuOpenIcon,\n  Cake as CakeIcon,\n  DataUsage as DataUsageIcon,\n  Add as AddIcon,\n  Autorenew as AutorenewIcon,\n  Info as InfoIcon,\n} from '@material-ui/icons'\nimport resetStates from './utils/resetStates';\nimport { langs } from './lang/langs';\n\nexport const ProportionateCarbs = () => {\n  const insulinUnitsState = useSelector(state => state.insulinUnits)\n  const state = useSelector(state => state.proportionateCarbs)\n  const settings = useSelector(state => state.settings)\n  const lang = langs[settings.lang]\n  const values = mergeStates(state, settings)\n  const dispatch = useDispatch()\n\n  const onKeyUp = (event) => {\n    if (event.keyCode !== 13) return;\n    event.target.blur()\n  }\n  const onFocusSelect = makeOnFocusSelect()\n  const onChanged = makeOnChanged(state, settings, dispatch, allProportionateCarbsChanged)\n  const onBlur = makeOnBlur(settings, dispatch, allProportionateCarbsChanged)\n\n  useEffect(() => {\n    dispatch(\n      titleChanged(lang.proportionateCarbsTitle)\n    )\n  })\n\n  const [showCarbRatio, setShowCarbRatio] = useState(false)\n  const [showCarbsPerAmount, setShowCarbsPerAmount] = useState(false)\n  const [showColumnAmount, setShowColumnAmount] = useState(false)\n  const [showAmountConsumed, setShowAmountConsumed] = useState(false)\n  const [showTotalAmount, setShowTotalAmount] = useState(false)\n  const [showPortionRatio, setShowPortionRatio] = useState(false)\n\n  return (\n    <section className=\"proportionatecarbs screen__container\">\n\n      <div className=\"proportionatecarbs__output\" style={outputContainer}>\n        <Typography variant=\"h2\" noWrap>\n          {state.roundedConsumedCarbs||0}{lang.proportionateCarbsUnitText}\n        </Typography>\n      </div>\n\n      <div className=\"proportionatecarbs__button__addtoinsulin\" style={{display:'flex'}}>\n\n        <Button\n          className='button'\n          style={topButton}\n          component={Link} to=\"/insulinunits\"\n        >\n          <CloseIcon />\n          &nbsp;{lang.proportionateCarbCancelButtonText}\n        </Button>\n        <Button\n          className='button'\n          style={topButton}\n          component={Link} to=\"/insulinunits\"\n          disabled={insulinUnitsState.ui_isTaken || state.roundedConsumedCarbs === 0}\n          onClick={\n            () => {\n              const carbs = (state.roundedConsumedCarbs||0);\n              if (!carbs) return;\n              const value = parseFloat(insulinUnitsState.ui_consumedCarbs)\n                ? `${insulinUnitsState.ui_consumedCarbs}+${carbs}`\n                : `${carbs}`\n              dispatch(allInsulinUnitsChanged(mergeStates(\n                insulinUnitsState,\n                settings,\n                {\n                  'consumedCarbs': value,\n                  'ui_consumedCarbs': value\n                }\n              )))\n            }\n          }\n        >\n          <AddIcon />\n          &nbsp;{lang.proportionateCarbsAddButtonText}\n        </Button>\n      </div>\n\n      <div className=\"proportionatecarbs__button__reset\">\n        <Button\n          className='button'\n          disabled={insulinUnitsState.ui_isTaken}\n          style={topButton}\n          onClick={\n            () => {\n              dispatch(allProportionateCarbsChanged(resetStates(\n                state,\n                settings\n              )))\n            }\n          }\n        >\n          <AutorenewIcon />\n          &nbsp;{lang.proportionateCarbsResetButtonText}\n        </Button>\n      </div>\n\n      <Typography className=\"section__divider\" variant=\"h6\" noWrap>\n        {lang.proportionateCarbsCarbRatioTitle}\n        {lang.proportionateCarbsCarbRatioInfoText &&\n          <React.Fragment>\n            <Button className=\"btn-info\" onClick={() => setShowCarbRatio(!showCarbRatio)}>\n              <InfoIcon />\n            </Button>\n            <Alert severity=\"info\" className=\"info\" style={{display: showCarbRatio ? 'flex':'none'}} onClose={() => setShowCarbRatio(false)}>\n              {lang.proportionateCarbsCarbRatioInfoText}\n            </Alert>\n          </React.Fragment>\n        }\n      </Typography>\n\n      <div className=\"proportionatecarbs_input input__group\">\n\n        <div className=\"proportionatecarbs__input__carbsperweight__container\">\n          <div className=\"proportionatecarbs__input__carbspercolumnweight input__container\">\n            <TextField label={<div>\n            {lang.proportionateCarbsCarbsPerAmountLabelText}\n            {lang.proportionateCarbsCarbsPerAmountInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowCarbsPerAmount(!showCarbsPerAmount)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showCarbsPerAmount ? 'flex':'none'}} onClose={() => setShowCarbsPerAmount(false)}>\n                {lang.proportionateCarbsCarbsPerAmountInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n              disabled={insulinUnitsState.ui_isTaken}\n              onKeyUp={onKeyUp}\n              onFocus={onFocusSelect.bind(this, 'carbsPerColumnAmount')}\n              onChange={onChanged.bind(this, 'carbsPerColumnAmount')}\n              onBlur={onBlur.bind(this, 'carbsPerColumnAmount')}\n              value={values.ui_carbsPerColumnAmount}\n              InputProps={{\n                startAdornment: <InputAdornment position=\"start\"><MenuOpenIcon /></InputAdornment>,\n                endAdornment: <InputAdornment position=\"end\">{lang.proportionateCarbsCarbsPerAmountUnitText}</InputAdornment>,\n              }}\n            />\n          </div>\n\n          <div className=\"proportionatecarbs__input__columnweight input__container\">\n            <TextField label={<div>\n            {lang.proportionateCarbsColumnAmountLabelText}\n            {lang.proportionateCarbsColumnAmountInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowColumnAmount(!showColumnAmount)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showColumnAmount ? 'flex':'none'}} onClose={() => setShowColumnAmount(false)}>\n                {lang.proportionateCarbsColumnAmountInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n              disabled={insulinUnitsState.ui_isTaken}\n              onKeyUp={onKeyUp}\n              onFocus={onFocusSelect.bind(this, 'columnAmount')}\n              onChange={onChanged.bind(this, 'columnAmount')}\n              onBlur={onBlur.bind(this, 'columnAmount')}\n              value={values.ui_columnAmount}\n              InputProps={{\n                startAdornment: <InputAdornment position=\"start\"><MaximizeIcon /></InputAdornment>,\n                endAdornment: <InputAdornment position=\"end\">{lang.proportionateCarbsColumnAmountUnitText}</InputAdornment>,\n              }}\n            />\n          </div>\n        </div>\n\n        <Typography className=\"section__divider\" variant=\"h6\" noWrap>\n          {lang.proportionateCarbsAmountConsumedTitle}\n          {lang.proportionateCarbsAmountConsumedInfoText &&\n          <React.Fragment>\n            <Button className=\"btn-info\" onClick={() => setShowAmountConsumed(!showAmountConsumed)}>\n              <InfoIcon />\n            </Button>\n            <Alert severity=\"info\" className=\"info\" style={{display: showAmountConsumed ? 'flex':'none'}} onClose={() => setShowAmountConsumed(false)}>\n              {lang.proportionateCarbsAmountConsumedInfoText}\n            </Alert>\n          </React.Fragment>\n        }\n        </Typography>\n\n        <div className=\"proportionatecarbs__input__amountconsumed__container\">\n        <div className=\"proportionatecarbs__input__totalpacketweight input__container\">\n          <TextField label={<div>\n            {lang.proportionateCarbsTotalAmountLabelText}\n            {lang.proportionateCarbsTotalAmountInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowTotalAmount(!showTotalAmount)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showTotalAmount ? 'flex':'none'}} onClose={() => setShowTotalAmount(false)}>\n                {lang.proportionateCarbsTotalAmountInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            disabled={insulinUnitsState.ui_isTaken}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'totalPacketAmount')}\n            onChange={onChanged.bind(this, 'totalPacketAmount')}\n            onBlur={onBlur.bind(this, 'totalPacketAmount')}\n            value={values.ui_totalPacketAmount}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><CakeIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.proportionateCarbsTotalAmountUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n        <div className=\"proportionatecarbs__input__portionratio input__container\">\n          <InputLabel htmlFor=\"portionratio\">\n            {lang.proportionateCarbsPortionRatioLabelText}\n            {lang.proportionateCarbsPortionRatioInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowPortionRatio(!showPortionRatio)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showPortionRatio ? 'flex':'none'}} onClose={() => setShowPortionRatio(false)}>\n                {lang.proportionateCarbsPortionRatioInfoText}\n              </Alert>\n            </React.Fragment>\n            }\n            </InputLabel>\n          <div className=\"select__container\">\n          <Select\n            native\n            disabled={insulinUnitsState.ui_isTaken}\n            value={values.ui_portionRatio}\n            onChange={onChanged.bind(this, 'portionRatio')}\n            onBlur={onBlur.bind(this, 'portionRatio')}\n            label={lang.proportionateCarbsPortionRatioLabelText}\n            inputProps={{\n              name: 'portionratio',\n              id: 'portionratio',\n            }}\n            startAdornment={<InputAdornment position=\"start\"><DataUsageIcon /></InputAdornment>}\n          >\n            {lang.proportionateCarbsPortionOptions}\n          </Select>\n          </div>\n        </div>\n        </div>\n      </div>\n\n    </section>\n  )\n}\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Button } from '@material-ui/core';\r\nimport { titleChanged } from './store/view';\r\nimport { resetRecords, removeRecordIndex } from './store/records'\r\nimport {\r\n  outputContainer,\r\n  topButton\r\n} from './utils/styles';\r\nimport {\r\n  Autorenew as AutorenewIcon,\r\n  GetApp as DownloadIcon\r\n} from '@material-ui/icons'\r\nimport { langs } from './lang/langs';\r\nimport { Label, ReferenceLine, CartesianGrid, XAxis, YAxis, Tooltip, Legend, Line, Bar, ComposedChart, ResponsiveContainer } from 'recharts';\r\n\r\nexport const Records = () => {\r\n  const state = useSelector(state => state.records)\r\n  const settings = useSelector(state => state.settings)\r\n  const lang = langs[settings.lang]\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      titleChanged(lang.recordsTitle)\r\n    )\r\n  })\r\n\r\n  const removeRecord = (event) => {\r\n    const index = parseInt(event.target.getAttribute('data-index'))\r\n    dispatch(removeRecordIndex(index))\r\n  }\r\n\r\n  const downloadData = state => {\r\n    const a = document.createElement('a')\r\n    a.setAttribute('download', `${new Date().toISOString()}_records.json`)\r\n    const json = window.btoa(JSON.stringify(state, null, 2))\r\n    a.setAttribute('href', `data:text/json;base64,${json}`)\r\n    a.click()\r\n  }\r\n\r\n  const getIntensity = (time, value, halflifeHHmm) => {\r\n    if (!halflifeHHmm) return 0\r\n    if (halflifeHHmm.length === 1) halflifeHHmm = `00:0${halflifeHHmm}`\r\n    if (halflifeHHmm.length === 2) halflifeHHmm = `00:${halflifeHHmm}`\r\n    if (halflifeHHmm.length === 4) halflifeHHmm = `0${halflifeHHmm}`\r\n    const halfLifeMs = Date.parse('1970-01-01T' + halflifeHHmm + 'Z'); // time it peaks and then interval it halves\r\n    const now =  Date.now();\r\n    const gap = now - time;\r\n    const passedIntervals = (gap / halfLifeMs)\r\n    if (passedIntervals > 10) return 0\r\n    const ratio = Math.pow(2, passedIntervals)\r\n    const intensity = 1 / ratio\r\n    if (value * intensity < 1) return 0\r\n    return intensity\r\n  }\r\n\r\n  const now = Date.now()\r\n  const oneHour = 60 * 60 * 1000\r\n  const endDate = now\r\n\r\n  const midnight = ((Math.floor(now / (oneHour * 24)) * (oneHour * 24)) - endDate) / oneHour\r\n\r\n  const data = state.map(row => {\r\n    return {\r\n      date: row.data,\r\n      hour: (row.date - endDate) / oneHour,\r\n      units: row.roundedAdjustedTotalUnits,\r\n      carbs: row.consumedCarbs,\r\n      glucose: row.currentBg\r\n    }\r\n  }).filter(row => row.hour > -24)\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <section className=\"insulinunits screen__container\">\r\n\r\n      <div className=\"insulinunits__output\" style={outputContainer}>\r\n        <ResponsiveContainer width={\"100%\"} height={300}>\r\n        <ComposedChart\r\n            data={data}\r\n            margin={{\r\n              top: 2,\r\n              right: 2,\r\n              bottom: 2,\r\n              left: 2\r\n            }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey=\"hour\" type=\"number\" domain={[-24, 0]} interval={-2}>\r\n              <Label value=\"last 24 hours\" offset={-6} position=\"bottom\" />\r\n            </XAxis>\r\n          <YAxis yAxisId='left'>\r\n            <Label value=\"carbs\" angle={-90} offset={6} position=\"center\" />\r\n          </YAxis>\r\n          <YAxis yAxisId=\"right\" orientation='right'>\r\n            <Label value=\"units and glucose\" angle={90} offset={6} position=\"center\" />\r\n          </YAxis>\r\n          <Tooltip labelFormatter={(value, name, props) => {\r\n            return new Date(endDate+(value*oneHour)).toLocaleDateString(\"en-GB\", { weekday: 'short', day: 'numeric', month: 'short', hour: 'numeric', minute: 'numeric' })\r\n          }}/>\r\n          <Legend />\r\n          <ReferenceLine yAxisId=\"left\" x={String(midnight)} stroke=\"grey\" label=\"\" />\r\n          <Bar yAxisId=\"left\" dataKey=\"carbs\" fill=\"green\" />\r\n          <Line yAxisId=\"right\" type=\"monotone\" dataKey=\"glucose\" stroke=\"blue\" />``\r\n          <Bar yAxisId=\"right\" dataKey=\"units\" fill=\"red\" />\r\n        </ComposedChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n      <div className=\"insulinunits__button__reset\" style={{ display: 'flex'}}>\r\n        <Button\r\n          className='button'\r\n          style={topButton}\r\n          onClick={\r\n            () => {\r\n              dispatch(resetRecords(state))\r\n            }\r\n          }\r\n        >\r\n          <AutorenewIcon />\r\n          &nbsp;{lang.recordsResetButtonText}\r\n        </Button>\r\n        <Button\r\n          className='button'\r\n          style={topButton}\r\n          onClick={\r\n            () => {\r\n              downloadData(state)\r\n            }\r\n          }\r\n        >\r\n          <DownloadIcon />\r\n          &nbsp;{lang.recordsDownloadButtonText}\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"insulinunits_input input__group\">\r\n          <table>\r\n            <thead>\r\n            <tr>\r\n              <th>Date</th>\r\n              <th>Glucose</th>\r\n              <th>Carbs</th>\r\n              <th>Units</th>\r\n              <th>For</th>\r\n              <th></th>\r\n            </tr>\r\n            </thead>\r\n            {state.map((row, index) => {\r\n              const unitsBackgroundColor =\r\n                !row.roundedAdjustedTotalUnits\r\n                  ? 'transparent'\r\n                  : `rgba(255,0,0, ${getIntensity(row.date, row.roundedAdjustedTotalUnits, settings.basalHalfLife)})`\r\n              const carbsBackgroundColor =\r\n                !row.consumedCarbs\r\n                  ? 'transparent'\r\n                  : `rgba(0,128,0, ${getIntensity(row.date, row.consumedCarbs, settings.carbsHalfLife)})`\r\n              return <tr key={index}>\r\n                <td>{new Date(row.date).toLocaleDateString(\"en-GB\", { weekday: 'short', day: 'numeric', month: 'short', hour: 'numeric', minute: 'numeric' })}</td>\r\n                <td>{row.currentBg}mmol/l</td>\r\n                <td style={{backgroundColor: carbsBackgroundColor}}>{row.consumedCarbs}g</td>\r\n                <td style={{ backgroundColor: unitsBackgroundColor }}>{row.calculationType === null ? 'none' : row.roundedAdjustedTotalUnits}</td>\r\n                <td>{row.calculationType === null ? 'n/a' : row.calculationType}</td>\r\n                <td><Button style={{minWidth: '12px'}} onClick={removeRecord} data-index={index}>x</Button></td>\r\n              </tr>\r\n            })}\r\n          </table>\r\n\r\n      </div>\r\n\r\n    </section>\r\n  </React.Fragment>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react';\nimport { defaultSettings } from './store/initialState';\nimport { useDispatch, useSelector } from 'react-redux'\nimport { TextField, InputAdornment, Button, InputLabel, Typography, Select } from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport { titleChanged } from './store/view';\nimport { allSettingsChanged } from './store/settings'\nimport makeOnChanged from './utils/makeOnChanged';\nimport makeOnBlur from './utils/makeOnBlur'\nimport {\n  Cake as CakeIcon,\n  Maximize as MaximizeIcon,\n  ShowChart as ShowChartIcon,\n  FitnessCenter as FitnessCenterIcon,\n  Settings as SettingsIcon,\n  DataUsage as DataUsageIcon,\n  Info as InfoIcon\n} from '@material-ui/icons'\nimport { langs } from './lang/langs';\nimport makeOnFocusSelect from './utils/makeOnFocusSelect';\n\nexport const Settings = () => {\n  const settings = useSelector(state => state.settings)\n  const lang = langs[settings.lang]\n  const dispatch = useDispatch()\n\n  const onKeyUp = (event) => {\n    if (event.keyCode !== 13) return;\n    event.target.blur()\n  }\n  const onFocusSelect = makeOnFocusSelect();\n  const onChanged = makeOnChanged(settings, defaultSettings, dispatch, allSettingsChanged, { noui: false })\n  const onBlur = makeOnBlur(defaultSettings, dispatch, allSettingsChanged, { noui: false })\n\n  useEffect(() => {\n    dispatch(\n      titleChanged('Settings')\n    )\n  })\n\n\n  const [showDefaultCurrentBg, setShowDefaultCurrentBg] = useState(false)\n  const [showDefaultTargetBg, setShowDefaultTargetBg] = useState(false)\n  const [showDefaultUnitAdjustmentPercentage, setShowDefaultUnitAdjustmentPercentage] = useState(false)\n  const [showDefaultCarbsPerUnit, setShowDefaultCarbsPerUnit] = useState(false)\n  const [showDefaultBgPerUnit, setShowDefaultBgPerUnit] = useState(false)\n  const [showDefaultColumnAmount, setShowDefaultColumnAmount] = useState(false)\n  const [showDefaultTotalPacketAmount, setShowDefaultTotalPacketAmount] = useState(false)\n  const [showPortionRatio, setShowPortionRatio] = useState(false)\n  const [showDefaultBasalHalfLife, setShowDefaultBasalHalfLife] = useState(false)\n  const [showDefaultCarbsHalfLife, setShowDefaultCarbsHalfLife] = useState(false)\n  const [showDefaultMinimumCarbs, setShowDefaultMinimumCarbs] = useState(false)\n  const [showDefaultMinimumUnits, setShowDefaultMinimumUnits] = useState(false)\n\n  return (\n    <section className=\"settings screen__container\">\n\n      <div className=\"settings_input input__group\">\n\n        <Typography className=\"section__divider\" variant=\"h6\" noWrap>\n          {lang.settingsInsulinUnitsTitle}\n        </Typography>\n\n        <div className=\"settings__input__currentbg input__container\">\n          <TextField label={<div>\n            {lang.settingsDefaultCurrentBgLabelText}\n            {lang.settingsDefaultCurrentBgInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowDefaultCurrentBg(!showDefaultCurrentBg)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showDefaultCurrentBg ? 'flex':'none'}} onClose={() => setShowDefaultCurrentBg(false)}>\n                {lang.settingsDefaultCurrentBgInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'currentBg')}\n            onChange={onChanged.bind(this, 'currentBg')}\n            onBlur={onBlur.bind(this, 'currentBg')}\n            value={settings.ui_currentBg}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><ShowChartIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.settingsDefaultCurrentBgUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"settings__input__unitadjustmentpercentage input__container\">\n          <TextField label={<div>\n            {lang.settingsDefaultUnitAdjustmentPercentageLabelText}\n            {lang.settingsDefaultUnitAdjustmentPercentageInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowDefaultUnitAdjustmentPercentage(!showDefaultUnitAdjustmentPercentage)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showDefaultUnitAdjustmentPercentage ? 'flex':'none'}} onClose={() => setShowDefaultUnitAdjustmentPercentage(false)}>\n                {lang.settingsDefaultUnitAdjustmentPercentageInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'unitAdjustmentPercentage')}\n            onChange={onChanged.bind(this, 'unitAdjustmentPercentage')}\n            onBlur={onBlur.bind(this, 'unitAdjustmentPercentage')}\n            value={settings.ui_unitAdjustmentPercentage}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><FitnessCenterIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.settingsDefaultUnitAdjustmentPercentageUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"settings__input__targetbg input__container\">\n          <TextField label={<div>\n            {lang.settingsDefaultTargetBgLabelText}\n            {lang.settingsDefaultTargetBgInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowDefaultTargetBg(!showDefaultTargetBg)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showDefaultTargetBg ? 'flex':'none'}} onClose={() => setShowDefaultTargetBg(false)}>\n                {lang.settingsDefaultTargetBgInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'targetBg')}\n            onChange={onChanged.bind(this, 'targetBg')}\n            onBlur={onBlur.bind(this, 'targetBg')}\n            value={settings.ui_targetBg}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.settingsDefaultTargetBgUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"settings__input__carbsperunit input__container\">\n          <TextField label={<div>\n            {lang.settingsDefaultCarbsPerUnitLabelText}\n            {lang.settingsDefaultCarbsPerUnitInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowDefaultCarbsPerUnit(!showDefaultCarbsPerUnit)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showDefaultCarbsPerUnit ? 'flex':'none'}} onClose={() => setShowDefaultCarbsPerUnit(false)}>\n                {lang.settingsDefaultCarbsPerUnitInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'carbsPerUnit')}\n            onChange={onChanged.bind(this, 'carbsPerUnit')}\n            onBlur={onBlur.bind(this, 'carbsPerUnit')}\n            value={settings.ui_carbsPerUnit}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.settingsDefaultCarbsPerUnitUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"settings__input__bgperunit input__container\">\n          <TextField label={<div>\n            {lang.settingsDefaultBgPerUnitLabelText}\n            {lang.settingsDefaultBgPerUnitInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowDefaultBgPerUnit(!showDefaultBgPerUnit)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showDefaultBgPerUnit ? 'flex':'none'}} onClose={() => setShowDefaultBgPerUnit(false)}>\n                {lang.settingsDefaultBgPerUnitInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'bgPerUnit')}\n            onChange={onChanged.bind(this, 'bgPerUnit')}\n            onBlur={onBlur.bind(this, 'bgPerUnit')}\n            value={settings.ui_bgPerUnit}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.settingsDefaultBgPerUnitUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <Typography className=\"section__divider\" variant=\"h6\" noWrap>\n          {lang.settingsCarbsPerMealAmountTitle}\n        </Typography>\n\n        <div className=\"settings__input__columnweight input__container\">\n          <TextField label={<div>\n            {lang.settingsDefaultColumnAmountLabelText}\n            {lang.settingsDefaultColumnAmountInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowDefaultColumnAmount(!showDefaultColumnAmount)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showDefaultColumnAmount ? 'flex':'none'}} onClose={() => setShowDefaultColumnAmount(false)}>\n                {lang.settingsDefaultColumnAmountInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'columnAmount')}\n            onChange={onChanged.bind(this, 'columnAmount')}\n            onBlur={onBlur.bind(this, 'columnAmount')}\n            value={settings.ui_columnAmount}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><MaximizeIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.settingsDefaultColumnAmountUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"settings__input__totalpacketweight input__container\">\n          <TextField label={<div>\n            {lang.settingsDefaultTotalPacketAmountLabelText}\n            {lang.settingsDefaultTotalPacketAmountInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowDefaultTotalPacketAmount(!showDefaultTotalPacketAmount)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showDefaultTotalPacketAmount ? 'flex':'none'}} onClose={() => setShowDefaultTotalPacketAmount(false)}>\n                {lang.settingsDefaultTotalPacketAmountInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'totalPacketAmount')}\n            onChange={onChanged.bind(this, 'totalPacketAmount')}\n            onBlur={onBlur.bind(this, 'totalPacketAmount')}\n            value={settings.ui_totalPacketAmount}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><CakeIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.settingsDefaultTotalPacketAmountUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"proportionatecarbs__input__portionratio input__container\">\n          <InputLabel htmlFor=\"portionratio\">{lang.settingsDefaultPortionRatioLabelText}</InputLabel>\n          <div className=\"select__container\">\n          <Select\n            native\n            value={settings.ui_portionRatio}\n            onChange={onChanged.bind(this, 'portionRatio')}\n            onBlur={onBlur.bind(this, 'portionRatio')}\n            label={<div>\n            {lang.settingsDefaultPortionRatioLabelText}\n            {lang.settingsDefaultPortionRatioInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowPortionRatio(!showPortionRatio)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showPortionRatio ? 'flex':'none'}} onClose={() => setShowPortionRatio(false)}>\n                {lang.settingsDefaultPortionRatioInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            inputProps={{\n              name: 'portionratio',\n              id: 'portionratio',\n            }}\n            startAdornment={<InputAdornment position=\"start\"><DataUsageIcon /></InputAdornment>}\n          >\n            {lang.settingsDefaultPortionOptions}\n          </Select>\n          </div>\n        </div>\n\n        <Typography className=\"section__divider\" variant=\"h6\" noWrap>\n          {lang.settingsReportTitle}\n        </Typography>\n\n        <div className=\"settings__input__basalhalfLife input__container\">\n          <TextField label={<div>\n            {lang.settingsDefaultBasalHalfLifeLabelText}\n            {lang.settingsDefaultBasalHalfLifeInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowDefaultBasalHalfLife(!showDefaultBasalHalfLife)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showDefaultBasalHalfLife ? 'flex':'none'}} onClose={() => setShowDefaultBasalHalfLife(false)}>\n                {lang.settingsDefaultBasalHalfLifeInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'basalHalfLife')}\n            onChange={onChanged.bind(this, 'basalHalfLife')}\n            onBlur={onBlur.bind(this, 'basalHalfLife')}\n            value={settings.ui_basalHalfLife}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.settingsDefaultBasalHalfLifeUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"settings__input__carbshalfLife input__container\">\n          <TextField label={<div>\n            {lang.settingsDefaultCarbsHalfLifeLabelText}\n            {lang.settingsDefaultCarbsHalfLifeInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowDefaultCarbsHalfLife(!showDefaultCarbsHalfLife)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showDefaultCarbsHalfLife ? 'flex':'none'}} onClose={() => setShowDefaultCarbsHalfLife(false)}>\n                {lang.settingsDefaultCarbsHalfLifeInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'carbsHalfLife')}\n            onChange={onChanged.bind(this, 'carbsHalfLife')}\n            onBlur={onBlur.bind(this, 'carbsHalfLife')}\n            value={settings.ui_carbsHalfLife}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.settingsDefaultCarbsHalfLifeUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <Typography className=\"section__divider\" variant=\"h6\" noWrap>\n          {lang.settingsRoundingTitle}\n        </Typography>\n\n        <div className=\"settings__input__minimumcarbs input__container\">\n          <TextField label={<div>\n            {lang.settingsDefaultMinimumCarbsLabelText}\n            {lang.settingsDefaultMinimumCarbsInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowDefaultMinimumCarbs(!showDefaultMinimumCarbs)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showDefaultMinimumCarbs ? 'flex':'none'}} onClose={() => setShowDefaultMinimumCarbs(false)}>\n                {lang.settingsDefaultMinimumCarbsInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'minimumCarbs')}\n            onChange={onChanged.bind(this, 'minimumCarbs')}\n            onBlur={onBlur.bind(this, 'minimumCarbs')}\n            value={settings.ui_minimumCarbs}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.settingsDefaultMinimumCarbsUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"settings__input__minimumunits input__container\">\n          <TextField label={<div>\n            {lang.settingsDefaultMinimumUnitsLabelText}\n            {lang.settingsDefaultMinimumUnitsInfoText &&\n            <React.Fragment>\n              <Button className=\"btn-info\" onClick={() => setShowDefaultMinimumUnits(!showDefaultMinimumUnits)}>\n                <InfoIcon />\n              </Button>\n              <Alert severity=\"info\" className=\"info\" style={{display: showDefaultMinimumUnits ? 'flex':'none'}} onClose={() => setShowDefaultMinimumUnits(false)}>\n                {lang.settingsDefaultMinimumUnitsInfoText}\n              </Alert>\n            </React.Fragment>}\n            </div>}\n            onKeyUp={onKeyUp}\n            onFocus={onFocusSelect.bind(this, 'minimumUnits')}\n            onChange={onChanged.bind(this, 'minimumUnits')}\n            onBlur={onBlur.bind(this, 'minimumUnits')}\n            value={settings.ui_minimumUnits}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{lang.settingsDefaultMinimumUnitsUnitText}</InputAdornment>,\n            }}\n          />\n        </div>\n\n\n      </div>\n\n    </section>\n  )\n}\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { titleChanged } from './store/view';\r\nimport { Typography } from '@material-ui/core';\r\nimport { langs } from './lang/langs';\r\n\r\nexport const Warning = () => {\r\n  const settings = useSelector(state => state.settings)\r\n  const dispatch = useDispatch();\r\n  const lang = langs[settings.lang]\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      titleChanged('Warning')\r\n    )\r\n  })\r\n\r\n  return <section className=\"proportionatecarbs screen__container\">\r\n    <Typography variant=\"h4\" noWrap>\r\n      {lang.warningTitle}\r\n    </Typography>\r\n    <div>\r\n    {lang.warningBody}\r\n    </div>\r\n  </section>\r\n\r\n}\r\n","/* eslint-disable react/jsx-no-target-blank */\r\nimport React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { langs } from './lang/langs';\r\nimport { titleChanged } from './store/view';\r\n\r\nexport const About = () => {\r\n  const dispatch = useDispatch();\r\n  const settings = useSelector(state => state.settings)\r\n  const lang = langs[settings.lang]\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      titleChanged('About')\r\n    )\r\n  })\r\n\r\n  return <section className=\"proportionatecarbs screen__container\">\r\n    <lang.aboutBody />\r\n  </section>\r\n\r\n}\r\n","import './App.css';\nimport { langs } from './lang/langs';\nimport React, { useEffect } from 'react';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n  withRouter\n} from \"react-router-dom\";\nimport { allSettingsChanged } from './store/settings';\nimport clsx from 'clsx'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { InsulinUnits } from './InsulinUnits';\nimport { ProportionateCarbs } from './ProportionateCarbs';\nimport { Records } from './Records';\nimport { Settings } from './Settings'\nimport { Warning } from './Warning'\nimport { About } from './About'\nimport { AppBar, List, IconButton, Toolbar, Divider, ListItem, ListItemIcon, ListItemText, Drawer, Typography } from '@material-ui/core'\nimport {\n  ChevronLeft as ChevronLeftIcon,\n  ChevronRight as ChevronRightIcon,\n  Menu as MenuIcon,\n  LocalHospitalOutlined as FoodInsulinIcon,\n  Settings as SettingsIcon,\n  SystemUpdate as SystemUpdateIcon,\n  Info as WarningIcon,\n  Help as AboutIcon,\n  Speed as ProportionateCarbsIcon,\n  TableChart as RecordsIcon\n} from '@material-ui/icons'\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\nconst drawerWidth = 'auto';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer - 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  menuButton: {\n    marginLeft: -20,\n    marginRight: 20,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: 'nowrap',\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerClose: {\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: 'hidden',\n    width: theme.spacing(0) + 1,\n  },\n  toolbar: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(2),\n  },\n}));\n\n\n\nfunction ScrollToTop({ history }) {\n  useEffect(() => {\n    const unlisten = history.listen(() => {\n      window.scrollTo(0, 0);\n    });\n    return () => {\n      unlisten();\n    }\n  }, [history]);\n\n  return (null);\n}\n\nconst ScrollToTopConnected = withRouter(ScrollToTop);\n\nfunction App() {\n  const dispatch = useDispatch();\n  const view = useSelector(state => state.view)\n  const settings = useSelector(state => state.settings)\n  const lang = langs[settings.lang]\n  const classes = useStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    (async () => {\n      const response = await fetch('./manifest.json');\n      const manifest = await response.json();\n      console.log(`Installed: ${settings.version}, Manifest: ${manifest.version}`)\n      dispatch(allSettingsChanged({ needsUpdating: (manifest.version !== settings.version) }))\n    })();\n  })\n\n  return (\n    <Router>\n      <ScrollToTopConnected />\n      <div className=\"App\">\n        <AppBar\n          position=\"fixed\"\n          className={clsx(classes.appBar, {\n            [classes.appBarShift]: open,\n          })}\n        >\n          <Toolbar>\n\n            <Typography variant=\"h6\" noWrap>\n              <Route path=\"/insulinunits\"><FoodInsulinIcon /></Route>\n              <Route path=\"/proportionatecarbs\"><ProportionateCarbsIcon /></Route>\n              <Route path=\"/records\"><RecordsIcon /></Route>\n              <Route path=\"/settings\"><SettingsIcon /></Route>\n              <Route path=\"/warning\"><WarningIcon /></Route>\n              <Route path=\"/about\"><AboutIcon /></Route>\n              &nbsp;{view.title}\n            </Typography>\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              onClick={handleDrawerOpen}\n              edge=\"start\"\n              className={clsx(classes.menuButton, {\n                [classes.hide]: open,\n              })}\n            >\n              <MenuIcon />\n            </IconButton>\n          </Toolbar>\n        </AppBar>\n        <Drawer\n          variant=\"permanent\"\n          className={clsx(classes.drawer, {\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          })}\n          classes={{\n            paper: clsx({\n              [classes.drawerOpen]: open,\n              [classes.drawerClose]: !open,\n            }),\n          }}\n        >\n          <div className={classes.toolbar}>\n            <IconButton onClick={handleDrawerClose}>\n              {theme.direction === 'rtl' ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n            </IconButton>\n          </div>\n          <Divider />\n          <List>\n            <ListItem button key='Insulin' component={Link} to=\"/insulinunits\" onClick={handleDrawerClose}>\n              <ListItemIcon><FoodInsulinIcon /></ListItemIcon>\n              <ListItemText primary={lang.insulinUnitsTitle} />\n            </ListItem>\n            <ListItem button key='Records' component={Link} to='/records' onClick={handleDrawerClose}>\n              <ListItemIcon><RecordsIcon /></ListItemIcon>\n              <ListItemText primary={lang.recordsTitle} />\n            </ListItem>\n          </List>\n          <Divider />\n          <List>\n            <ListItem button key='Settings' component={Link} to='/settings' onClick={handleDrawerClose}>\n                <ListItemIcon><SettingsIcon /></ListItemIcon>\n                <ListItemText primary={'Settings'} />\n            </ListItem>\n            <ListItem button key='Warning' component={Link} to='/warning' onClick={handleDrawerClose}>\n                <ListItemIcon><WarningIcon /></ListItemIcon>\n                <ListItemText primary={'Warning'} />\n            </ListItem>\n            <ListItem button disabled={!settings.needsUpdating} key='Update' onClick={() => {\n              window.serviceWorkerRegistration.active.postMessage('update')\n            }}>\n                <ListItemIcon><SystemUpdateIcon /></ListItemIcon>\n                <ListItemText primary={'Update'} />\n            </ListItem>\n            <ListItem button key='About' component={Link} to='/about' onClick={handleDrawerClose}>\n                <ListItemIcon><AboutIcon /></ListItemIcon>\n                <ListItemText primary={'About'} />\n            </ListItem>\n          </List>\n        </Drawer>\n        <main className={classes.content}>\n          <div className={classes.toolbar} />\n          <Switch>\n            <Route path=\"/insulinunits\">\n              <InsulinUnits />\n            </Route>\n            <Route path=\"/records\">\n              <Records />\n            </Route>\n            <Route path=\"/proportionatecarbs\">\n              <ProportionateCarbs />\n            </Route>\n            <Route path=\"/settings\">\n              <Settings />\n            </Route>\n            <Route path=\"/warning\">\n              <Warning />\n            </Route>\n            <Route path=\"/about\">\n              <About />\n            </Route>\n            <Redirect to=\"/insulinunits\" />\n          </Switch>\n        </main>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { configureStore } from '@reduxjs/toolkit'\n\nimport settingsReducer from './settings'\nimport insulinUnitsReducer from './insulinUnits'\nimport proportionateCarbsReducer from './proportionateCarbs'\nimport recordsReducer from './records'\nimport viewReducer from './view'\n\nexport default configureStore({\n  reducer: {\n    view: viewReducer,\n    settings: settingsReducer,\n    insulinUnits: insulinUnitsReducer,\n    proportionateCarbs: proportionateCarbsReducer,\n    records: recordsReducer\n  }\n})\n","// Register the service worker\r\nif ('serviceWorker' in navigator) {\r\n  // Wait for the 'load' event to not block other work\r\n  window.addEventListener('load', async () => {\r\n    // Try to register the service worker.\r\n    let registration;\r\n    try {\r\n      registration = await navigator.serviceWorker.register('./serviceWorker.js');\r\n      console.log('Service worker registered! 😎', registration);\r\n    } catch (err) {\r\n      console.log('😥 Service worker registration failed: ', err);\r\n      return;\r\n    }\r\n\r\n    navigator.serviceWorker.addEventListener('message', event => {\r\n      // event is a MessageEvent object\r\n      console.log(`The service worker sent me a message: ${event.data}`);\r\n      switch (event.data) {\r\n        case \"refresh\":\r\n          window.location.reload();\r\n          return;\r\n        default:\r\n          return;\r\n      }\r\n    });\r\n\r\n    navigator.serviceWorker.ready.then( registration => {\r\n      window.serviceWorkerRegistration = registration;\r\n      registration.active.postMessage(\"hi\");\r\n    });\r\n  });\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport store from './store/store'\nimport './manifest';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}