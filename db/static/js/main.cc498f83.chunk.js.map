{"version":3,"sources":["store/initialState.js","store/settings.js","store/view.js","utils/round.js","store/insulinUnits.js","utils/min.js","utils/doStringMath.js","utils/mergeStates.js","utils/resetStates.js","utils/makeOnChanged.js","utils/makeOnBlur.js","utils/styles.js","InsulinUnits.js","store/proportionateCarbs.js","ProportionateCarbs.js","Settings.js","Warning.js","About.js","App.js","reportWebVitals.js","store/store.js","manifest.js","index.js"],"names":["addUI","settings","output","key","startsWith","defaultSettings","version","needsUpdating","consumedCarbs","currentBg","minimumUnits","carbsPerUnit","bgPerUnit","targetBg","unitAdjustmentPercentage","carbsPerColumnWeight","columnWeight","totalPacketWeight","totalPieces","consumedPieces","minimumCarbs","savedSettings","JSON","parse","localStorage","getItem","initialState","view","title","insulinUnits","ui_consumedCarbs","ui_currentBg","ui_unitAdjustmentPercentage","ui_minimumUnits","ui_carbsPerUnit","ui_bgPerUnit","ui_targetBg","ui_unitAdjustmentRatio","bgDistance","bgUnits","carbUnits","totalUnits","adjustedTotalUnits","roundedAdjustedTotalUnits","proportionateCarbs","ui_carbsPerColumnWeight","ui_columnWeight","ui_totalPacketWeight","ui_totalPieces","ui_consumedPieces","ui_minimumCarbs","carbRatio","totalPacketCarbs","carbsPerPiece","roundedConsumedCarbs","settingsSlice","createSlice","name","reducers","allSettingsChanged","state","action","Object","assign","payload","setItem","stringify","actions","viewSlice","titleChanged","round","value","precision","Math","valueAsString","String","includes","precisionAsString","precisionAfterDecimal","slice","indexOf","truncatedString","length","parseFloat","insulinUnitsSlice","allInsulinUnitsChanged","stateUpdate","unitAdjustmentRatio","min","doUnitMath","doStringMath","str","replace","evaluate","mergeStates","update","merged","err","fromKey","resetStates","makeOnChanged","dispatch","noui","event","target","makeOnBlur","defaults","screenContainer","maxWidth","margin","outputContainer","paddingBottom","inputGroup","paddingTop","inputContainer","display","input","fontSize","addCarbs","padding","minWidth","topButton","marginTop","width","rawStyles","makeStyles","InsulinUnits","useSelector","values","useDispatch","onChanged","onBlur","useEffect","className","style","Typography","variant","noWrap","Button","onClick","Autorenew","TextField","label","inputProps","onChange","bind","InputProps","startAdornment","InputAdornment","position","Restaurant","endAdornment","helperText","component","Link","to","Add","ShowChart","FitnessCenter","proportionateCarbsSlice","allProportionateCarbsChanged","ProportionateCarbs","insulinUnitsState","carbs","Maximize","MenuOpen","Cake","RadioButtonUnchecked","DataUsage","Settings","Warning","About","href","Boolean","drawerWidth","useStyles","theme","root","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","marginRight","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","spacing","breakpoints","up","toolbar","alignItems","justifyContent","mixins","content","flexGrow","App","classes","useTheme","React","useState","open","setOpen","handleDrawerClose","console","log","a","fetch","response","json","manifest","AppBar","clsx","Toolbar","IconButton","color","aria-label","edge","Menu","Drawer","paper","direction","ChevronRight","ChevronLeft","Divider","List","ListItem","button","ListItemIcon","LocalHospitalOutlined","ListItemText","primary","Info","disabled","window","serviceWorkerRegistration","active","postMessage","SystemUpdate","Help","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","configureStore","reducer","viewReducer","settingsReducer","insulinUnitsReducer","proportionateCarbsReducer","navigator","addEventListener","serviceWorker","register","registration","data","location","reload","ready","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.cc498f83.chunk.js","sourcesContent":["function addUI(settings) {\n  if (!settings) return settings;\n  const output = {};\n  for (const key in settings) {\n    if (key.startsWith('ui_')) continue;\n    output[key] = settings[key]\n    output[`ui_${key}`] = settings[key]\n  }\n  return output\n}\n\nfunction removeVersion(settings) {\n  return {...settings, version: null}\n}\n\nexport const defaultSettings = addUI({\n  version: \"0.0.10\",\n  needsUpdating: false,\n  consumedCarbs: 0,\n  currentBg: 5,\n  minimumUnits: 0.1,\n  carbsPerUnit: 0,\n  bgPerUnit: 0,\n  targetBg: 5,\n  unitAdjustmentPercentage: 0,\n  carbsPerColumnWeight: 0,\n  columnWeight: 100,\n  totalPacketWeight: 100,\n  totalPieces: 8,\n  consumedPieces: 8,\n  minimumCarbs: 0.1\n});\n\nconst savedSettings = removeVersion(addUI(JSON.parse(localStorage.getItem('settings') || 'null')) || {});\nfor (const key in defaultSettings) {\n  savedSettings[key] = savedSettings?.[key] ?? defaultSettings[key];\n}\n\nexport const initialState = {\n  view: {\n    title: ''\n  },\n  settings: savedSettings,\n  insulinUnits: {\n    consumedCarbs: null,\n    currentBg: null,\n    unitAdjustmentPercentage: null,\n    minimumUnits: null,\n    carbsPerUnit: null,\n    bgPerUnit: null,\n    targetBg: null,\n    ui_consumedCarbs: null,\n    ui_currentBg: null,\n    ui_unitAdjustmentPercentage: null,\n    ui_minimumUnits: null,\n    ui_carbsPerUnit: null,\n    ui_bgPerUnit: null,\n    ui_targetBg: null,\n    ui_unitAdjustmentRatio: 0,\n    bgDistance: 0,\n    bgUnits: 0,\n    carbUnits: 0,\n    totalUnits: 0,\n    adjustedTotalUnits: 0,\n    roundedAdjustedTotalUnits: 0\n  },\n  proportionateCarbs: {\n    carbsPerColumnWeight: null,\n    columnWeight: null,\n    totalPacketWeight: null,\n    totalPieces: null,\n    consumedPieces: null,\n    minimumCarbs: null,\n    ui_carbsPerColumnWeight: null,\n    ui_columnWeight: null,\n    ui_totalPacketWeight: null,\n    ui_totalPieces: null,\n    ui_consumedPieces: null,\n    ui_minimumCarbs: null,\n    carbRatio: 0,\n    totalPacketCarbs: 0,\n    carbsPerPiece: 0,\n    consumedCarbs: 0,\n    roundedConsumedCarbs: 0\n  }\n}\n","import { createSlice } from '@reduxjs/toolkit'\nimport { initialState } from './initialState'\n\nconst settingsSlice = createSlice({\n  name: 'settings',\n  initialState: initialState.settings,\n  reducers: {\n    allSettingsChanged(state, action) {\n      Object.assign(state, action.payload)\n      localStorage.setItem('settings', JSON.stringify(state, null, 2))\n    }\n  }\n})\n\nexport const {\n  allSettingsChanged\n} = settingsSlice.actions\n\nexport default settingsSlice.reducer\n","import { createSlice } from '@reduxjs/toolkit'\nimport { initialState } from './initialState'\n\nconst viewSlice = createSlice({\n  name: 'view',\n  initialState: initialState.view,\n  reducers: {\n    titleChanged(state, action) {\n      state.title = action.payload\n    }\n  }\n})\n\nexport const {\n  titleChanged\n} = viewSlice.actions\n\nexport default viewSlice.reducer\n","export default function round(value, precision) {\r\n  value = Math.round(value / precision) * precision\r\n  const valueAsString = String(value)\r\n  if (valueAsString.includes('.')) {\r\n    const precisionAsString = String(precision)\r\n    const precisionAfterDecimal = precisionAsString.slice(precisionAsString.indexOf('.') + 1)\r\n    const truncatedString = valueAsString.slice(0, valueAsString.indexOf('.') + 1 + precisionAfterDecimal.length)\r\n    return parseFloat(truncatedString)\r\n  }\r\n  return value\r\n}\r\n","import { createSlice } from '@reduxjs/toolkit'\nimport round from '../utils/round'\nimport min from '../utils/min'\nimport { initialState } from './initialState'\n\nconst doUnitMath = (state, stateUpdate) => {\n  Object.assign(state, stateUpdate)\n\n  const consumedCarbs = state.consumedCarbs\n  const currentBg = state.currentBg\n  const unitAdjustmentPercentage = state.unitAdjustmentPercentage\n  const targetBg = state.targetBg\n  const carbsPerUnit = state.carbsPerUnit\n  const bgPerUnit = state.bgPerUnit\n  const minimumUnits = state.minimumUnits\n\n  const unitAdjustmentRatio = 1 + (unitAdjustmentPercentage / 100)\n  const bgDistance = (currentBg - targetBg)\n  const bgUnits = bgPerUnit ? (bgDistance / bgPerUnit) : 0\n  const carbUnits = carbsPerUnit ? (consumedCarbs / carbsPerUnit) : 0\n\n  const totalUnits = (bgUnits + carbUnits)\n  const adjustedTotalUnits = (totalUnits * unitAdjustmentRatio)\n  const roundedAdjustedTotalUnits = min(round(adjustedTotalUnits, minimumUnits))\n\n  Object.assign(state, {\n    unitAdjustmentRatio,\n    bgDistance,\n    bgUnits,\n    carbUnits,\n    totalUnits,\n    adjustedTotalUnits,\n    roundedAdjustedTotalUnits\n  })\n\n}\n\nconst insulinUnitsSlice = createSlice({\n  name: 'insulinUnits',\n  initialState: initialState.insulinUnits,\n  reducers: {\n    allInsulinUnitsChanged(state, action) {\n      doUnitMath(state, action.payload)\n    }\n  }\n})\n\nexport const {\n  allInsulinUnitsChanged\n} = insulinUnitsSlice.actions\n\nexport default insulinUnitsSlice.reducer\n","export default function min(value, min = 0) {\r\n  return value < min ? min : value;\r\n}\r\n","import { evaluate } from 'mathjs'\n\nexport default function doStringMath(str) {\n  str = String(str)\n  str = str.replace(/x/i, '*')\n  return evaluate(str)\n}\n","import doStringMath from './doStringMath';\n\nexport default function mergeStates(state, settings, update = {}) {\n  state = {...state}\n  update = {...update}\n  const merged = {}\n  for (const key in update) {\n    // do math only on non ui values\n    try {\n      update[key] = key.startsWith('ui_') ? update[key] : doStringMath(update[key])\n    } catch (err) {\n      // Ignore mid-math errors\n      delete update[key]\n    }\n  }\n  for (const key in update) {\n    const fromKey = key.startsWith('ui_') ? key.slice(3) : key;\n    // if updated value matches settings then remove\n    if (update[key] === settings[fromKey]) {\n      update[key] = null;\n      state[key] = null;\n      merged[key] = null;\n    }\n  }\n  for (const key in state) {\n    const fromKey = key.startsWith('ui_') ? key.slice(3) : key;\n    // output final value filling in defaults\n    merged[key] = update[key] ?? state[key] ?? settings[fromKey]\n  }\n  return merged\n}\n","import doStringMath from './doStringMath';\r\n\r\nexport default function resetStates(state, settings) {\r\n  state = {...state}\r\n  const update = {};\r\n  for (const key in state) {\r\n    if (!key.startsWith('ui_')) continue;\r\n    const fromKey = key.slice(3)\r\n    update[key] = settings[fromKey]\r\n    update[fromKey] = settings[fromKey]\r\n  }\r\n  const merged = {}\r\n  for (const key in update) {\r\n    // do math only on non ui values\r\n    try {\r\n      update[key] = key.startsWith('ui_') ? update[key] : doStringMath(update[key])\r\n    } catch (err) {\r\n      // Ignore mid-math errors\r\n      delete update[key]\r\n    }\r\n  }\r\n  for (const key in update) {\r\n    const fromKey = key.startsWith('ui_') ? key.slice(3) : key;\r\n    // if updated value matches settings then remove\r\n    if (update[key] === settings[fromKey]) {\r\n      update[key] = null;\r\n      state[key] = null;\r\n      merged[key] = null;\r\n    }\r\n  }\r\n  for (const key in state) {\r\n    const fromKey = key.startsWith('ui_') ? key.slice(3) : key;\r\n    // output final value filling in defaults\r\n    merged[key] = update[key] ?? state[key] ?? settings[fromKey]\r\n  }\r\n  return merged\r\n}\r\n","import mergeStates from \"./mergeStates\"\n\nexport default function makeOnChanged(state, settings, dispatch, action, { noui = false } = {}) {\n  return (name, event) => {\n    const value = event.target.value\n    try {\n      dispatch(\n        action(mergeStates(\n          state,\n          settings,\n          noui\n          ? {\n            [name]: value || settings[name]\n          }\n          : {\n            [name]: value || settings[name],\n            [`ui_${name}`]: value\n          }\n        ))\n      )\n    } catch (err) {}\n  }\n}\n","export default function makeOnBlur(defaults, dispatch, action, { noui = false } = {}) {\n  return (name, event) => {\n    const value = event.target.value\n    if (value !== \"\") return;\n    dispatch(\n      action(\n        noui\n        ? {\n          [name]: defaults[name],\n        }\n        : {\n          [name]: defaults[name],\n          [`ui_${name}`]: defaults[name]\n        }\n      )\n    )\n  }\n}\n","import { makeStyles } from '@material-ui/core/styles';\n\nconst screenContainer = {\n  maxWidth: '400px',\n  margin: 'auto'\n}\n\nconst outputContainer = {\n  paddingBottom: '1em'\n}\n\nconst inputGroup = {\n  paddingTop: '1em'\n}\n\nconst inputContainer = {\n  display: 'flex',\n  paddingBottom: '2rem'\n}\n\nconst input = {\n  display: 'inline-flex',\n  fontSize: '2rem'\n}\n\nconst addCarbs = {\n  display: 'inline-flex',\n  padding: '6px 0px',\n  minWidth: '32px'\n}\n\nconst topButton = {\n  marginTop: '0em',\n  width: '100%'\n}\n\nconst rawStyles = {\n  input,\n  inputGroup,\n  addCarbs,\n  inputContainer,\n  outputContainer,\n  screenContainer,\n  topButton\n};\n\nconst styles = makeStyles(rawStyles);\n\nexport default styles\n\nexport {\n  input,\n  inputGroup,\n  addCarbs,\n  inputContainer,\n  outputContainer,\n  screenContainer,\n  topButton\n}\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux'\nimport {\n  Link\n} from \"react-router-dom\";\nimport { TextField, Typography, InputAdornment, Button } from '@material-ui/core';\nimport { titleChanged } from './store/view';\nimport { allInsulinUnitsChanged } from './store/insulinUnits'\n// import { allProportionateCarbsChanged } from './store/proportionateCarbs'\nimport mergeStates from './utils/mergeStates'\nimport resetStates from './utils/resetStates';\nimport makeOnChanged from './utils/makeOnChanged';\nimport makeOnBlur from './utils/makeOnBlur'\nimport {\n  screenContainer,\n  outputContainer,\n  inputGroup,\n  inputContainer,\n  input,\n  addCarbs,\n  topButton\n} from './utils/styles';\nimport {\n  Restaurant as RestaurantIcon,\n  ShowChart as ShowChartIcon,\n  FitnessCenter as FitnessCenterIcon,\n  Settings as SettingsIcon,\n  Add as AddIcon,\n  Autorenew as AutorenewIcon\n} from '@material-ui/icons'\n\nexport const InsulinUnits = () => {\n  // const proportionateCarbsState = useSelector(state => state.proportionateCarbs)\n  const state = useSelector(state => state.insulinUnits)\n  const settings = useSelector(state => state.settings)\n  const values = mergeStates(state, settings)\n  const dispatch = useDispatch()\n  const onChanged = makeOnChanged(state, settings, dispatch, allInsulinUnitsChanged)\n  const onBlur = makeOnBlur(settings, dispatch, allInsulinUnitsChanged)\n\n  useEffect(() => {\n    dispatch(\n      titleChanged('Bolus Insulin')\n    )\n  })\n\n  return (\n    <section className=\"insulinunits\" style={screenContainer}>\n\n      <div className=\"insulinunits__output\" style={outputContainer}>\n        <Typography variant=\"h2\" noWrap>\n          {state.roundedAdjustedTotalUnits||0}units\n        </Typography>\n      </div>\n\n      <div className=\"insulinunits__button__reset\">\n        <Button\n          style={topButton}\n          onClick={\n            () => {\n              dispatch(allInsulinUnitsChanged(resetStates(\n                state,\n                settings\n              )))\n            }\n          }\n        >\n          <AutorenewIcon />\n          &nbsp;Reset\n        </Button>\n      </div>\n\n      <div className=\"insulinunits_input\" style={inputGroup}>\n\n        <div className=\"insulinunits__input__consumedcarbs\" style={inputContainer}>\n          <TextField label=\"Consumed carbohydrates\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'consumedCarbs')}\n            onBlur={onBlur.bind(this, 'consumedCarbs')}\n            value={values.ui_consumedCarbs}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><RestaurantIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{state.consumedCarbs||0}g</InputAdornment>,\n            }}\n            helperText=\":: The + button goes to the carb calculator ::\"\n          />\n          <Button\n            style={addCarbs}\n            component={Link} to=\"/proportionatecarbs\"\n            onClick={\n              () => {\n                // Reset proportionatecarbsui\n                // dispatch(allProportionateCarbsChanged(resetStates(\n                //   proportionateCarbsState,\n                //   settings\n                // )))\n              }\n            }\n          >\n            <AddIcon />\n          </Button>\n        </div>\n\n        <div className=\"insulinunits__input__currentbg\" style={inputContainer}>\n          <TextField label=\"Current blood glucose\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'currentBg')}\n            onBlur={onBlur.bind(this, 'currentBg')}\n            value={values.ui_currentBg}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><ShowChartIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">mmol/l</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"insulinunits__input__unitadjustmentpercentage\" style={inputContainer}>\n          <TextField label=\"Insulin efficiency adjustment\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'unitAdjustmentPercentage')}\n            onBlur={onBlur.bind(this, 'unitAdjustmentPercentage')}\n            value={values.ui_unitAdjustmentPercentage}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><FitnessCenterIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">%</InputAdornment>,\n            }}\n            helperText=\":: Example: +20 for stress/illness/sitting, -20 for exercise ::\"\n          />\n        </div>\n\n        <div className=\"insulinunits__input__targetbg\" style={inputContainer}>\n          <TextField label=\"Target blood glucose\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'targetBg')}\n            onBlur={onBlur.bind(this, 'targetBg')}\n            value={values.ui_targetBg}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">mmol/l</InputAdornment>,\n            }}\n          />\n        </div>\n\n        <div className=\"insulinunits__input__carbsperunit\" style={inputContainer}>\n          <TextField label=\"Carbs per unit\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'carbsPerUnit')}\n            onBlur={onBlur.bind(this, 'carbsPerUnit')}\n            value={values.ui_carbsPerUnit}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">g</InputAdornment>,\n            }}\n            helperText=\":: How many carbs would you need exactly 1 unit to correct? Bigger amounts mean less insulin, as you can eat more carbs per unit. Smaller amounts mean more insulin as you can eat fewer carbs per unit. ::\"\n          />\n        </div>\n\n        <div className=\"insulinunits__input__bgperunit\" style={inputContainer}>\n          <TextField label=\"Blood glucose correction per unit\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'bgPerUnit')}\n            onBlur={onBlur.bind(this, 'bgPerUnit')}\n            value={values.ui_bgPerUnit}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">mmol/l</InputAdornment>,\n            }}\n            helperText=\":: How many mmol/l would your glucose drop for 1 unit? Bigger amounts mean less insulin as 1 unit will move your blood sugar by a larger degree. Smaller amounts mean more insulin. ::\"\n          />\n        </div>\n\n      </div>\n\n    </section>\n  )\n}\n","import { createSlice } from '@reduxjs/toolkit'\nimport round from '../utils/round'\nimport { initialState } from './initialState'\n\nconst doUnitMath = (state, stateUpdate) => {\n  Object.assign(state, stateUpdate)\n\n  const carbsPerColumnWeight = state.carbsPerColumnWeight\n  const columnWeight = state.columnWeight\n  const totalPacketWeight = state.totalPacketWeight\n  const totalPieces = state.totalPieces\n  const consumedPieces = state.consumedPieces\n  const minimumCarbs = state.minimumCarbs\n\n  const carbRatio = columnWeight ? (carbsPerColumnWeight / columnWeight) : 0\n  const totalPacketCarbs = carbRatio * totalPacketWeight\n  const carbsPerPiece = totalPieces ? (totalPacketCarbs / totalPieces) : 0\n  const consumedCarbs = (carbsPerPiece * consumedPieces);\n\n  const roundedConsumedCarbs = round(consumedCarbs, minimumCarbs)\n\n  Object.assign(state, {\n    carbRatio,\n    totalPacketCarbs,\n    carbsPerPiece,\n    consumedCarbs,\n    roundedConsumedCarbs\n  })\n\n}\n\nconst proportionateCarbsSlice = createSlice({\n  name: 'proportionateCarbs',\n  initialState: initialState.proportionateCarbs,\n  reducers: {\n    allProportionateCarbsChanged(state, action) {\n      doUnitMath(state, action.payload)\n    }\n  }\n})\n\nexport const {\n  allProportionateCarbsChanged\n} = proportionateCarbsSlice.actions\n\nexport default proportionateCarbsSlice.reducer\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux'\nimport {\n  Link\n} from \"react-router-dom\";\nimport { Typography, TextField, InputAdornment, Button } from '@material-ui/core'\nimport { titleChanged } from './store/view';\nimport { allInsulinUnitsChanged } from './store/insulinUnits';\nimport { allProportionateCarbsChanged } from './store/proportionateCarbs'\nimport mergeStates from './utils/mergeStates'\nimport makeOnChanged from './utils/makeOnChanged';\nimport makeOnBlur from './utils/makeOnBlur'\nimport {\n  screenContainer,\n  outputContainer,\n  topButton,\n  inputGroup,\n  inputContainer,\n  input\n} from './utils/styles';\nimport {\n  Maximize as MaximizeIcon,\n  MenuOpen as MenuOpenIcon,\n  RadioButtonUnchecked as RadioButtonUncheckedIcon,\n  Cake as CakeIcon,\n  DataUsage as DataUsageIcon,\n  Add as AddIcon,\n  Autorenew as AutorenewIcon\n} from '@material-ui/icons'\nimport resetStates from './utils/resetStates';\n\nexport const ProportionateCarbs = () => {\n  const insulinUnitsState = useSelector(state => state.insulinUnits)\n  const state = useSelector(state => state.proportionateCarbs)\n  const settings = useSelector(state => state.settings)\n  const values = mergeStates(state, settings)\n  const dispatch = useDispatch()\n  const onChanged = makeOnChanged(state, settings, dispatch, allProportionateCarbsChanged)\n  const onBlur = makeOnBlur(settings, dispatch, allProportionateCarbsChanged)\n\n  useEffect(() => {\n    dispatch(\n      titleChanged('Carbohydrates')\n    )\n  })\n\n  return (\n    <section className=\"proportionatecarbs\" style={screenContainer}>\n\n      <div className=\"proportionatecarbs__output\" style={outputContainer}>\n        <Typography variant=\"h2\" noWrap>\n          {state.roundedConsumedCarbs||0}g\n        </Typography>\n      </div>\n\n      <div className=\"proportionatecarbs__button__addtoinsulin\">\n        <Button\n          style={topButton}\n          component={Link} to=\"/insulinunits\"\n          onClick={\n            () => {\n              const carbs = (state.roundedConsumedCarbs||0);\n              if (!carbs) return;\n              const value = parseFloat(insulinUnitsState.ui_consumedCarbs)\n                ? `${insulinUnitsState.ui_consumedCarbs}+${carbs}`\n                : `${carbs}`\n              dispatch(allInsulinUnitsChanged(mergeStates(\n                insulinUnitsState,\n                settings,\n                {\n                  'consumedCarbs': value,\n                  'ui_consumedCarbs': value\n                }\n              )))\n            }\n          }\n        >\n          <AddIcon />\n          &nbsp;Add to bolus insulin calculator\n        </Button>\n      </div>\n\n      <div className=\"proportionatecarbs__button__reset\">\n        <Button\n          style={topButton}\n          onClick={\n            () => {\n              dispatch(allProportionateCarbsChanged(resetStates(\n                state,\n                settings\n              )))\n            }\n          }\n        >\n          <AutorenewIcon />\n          &nbsp;Reset\n        </Button>\n      </div>\n\n      <div className=\"proportionatecarbs_input\" style={inputGroup}>\n\n        <div className=\"proportionatecarbs__input__columnweight\" style={inputContainer}>\n          <TextField label=\"Per weight\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'columnWeight')}\n            onBlur={onBlur.bind(this, 'columnWeight')}\n            value={values.ui_columnWeight}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><MaximizeIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">g</InputAdornment>,\n            }}\n            helperText=\":: The 'per weight' or 'column weight', normally 100g ::\"\n          />\n        </div>\n\n        <div className=\"proportionatecarbs__input__carbspercolumnweight\" style={inputContainer}>\n          <TextField label=\"Carbs per weight\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'carbsPerColumnWeight')}\n            onBlur={onBlur.bind(this, 'carbsPerColumnWeight')}\n            value={values.ui_carbsPerColumnWeight}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><MenuOpenIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">g</InputAdornment>,\n            }}\n            helperText=\":: Number of carbs in the 'per weight' or 'column weight' ::\"\n          />\n        </div>\n\n        <div className=\"proportionatecarbs__input__totalpacketweight\" style={inputContainer}>\n          <TextField label=\"Total (net) weight\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'totalPacketWeight')}\n            onBlur={onBlur.bind(this, 'totalPacketWeight')}\n            value={values.ui_totalPacketWeight}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><CakeIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">g</InputAdornment>,\n            }}\n            helperText=\":: Total weight of the packet/cake/meal ::\"\n          />\n        </div>\n\n        <div className=\"proportionatecarbs__input__totalpieces\" style={inputContainer}>\n          <TextField label=\"Total pieces\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'totalPieces')}\n            onBlur={onBlur.bind(this, 'totalPieces')}\n            value={values.ui_totalPieces}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><RadioButtonUncheckedIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{values.ui_consumedPieces}/{values.ui_totalPieces}</InputAdornment>,\n            }}\n            helperText=\":: How many pieces will you divide the packet/cake/meal into? ::\"\n          />\n        </div>\n\n        <div className=\"proportionatecarbs__input__consumedpieces\" style={inputContainer}>\n          <TextField label=\"Consumed pieces\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'consumedPieces')}\n            onBlur={onBlur.bind(this, 'consumedPieces')}\n            value={values.ui_consumedPieces}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><DataUsageIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{values.ui_consumedPieces}/{values.ui_totalPieces}</InputAdornment>,\n            }}\n            helperText=\":: How many pieces of the packet/cake/meal will you eat? ::\"\n          />\n        </div>\n\n      </div>\n\n    </section>\n  )\n}\n","import React, { useEffect } from 'react';\nimport { defaultSettings } from './store/initialState';\nimport { useDispatch, useSelector } from 'react-redux'\nimport { TextField, InputAdornment, } from '@material-ui/core';\nimport { titleChanged } from './store/view';\nimport { allSettingsChanged } from './store/settings'\nimport makeOnChanged from './utils/makeOnChanged';\nimport makeOnBlur from './utils/makeOnBlur'\nimport {\n  screenContainer,\n  input,\n  inputContainer\n} from './utils/styles';\nimport {\n  // LocalHospitalOutlined as LocalHospitalOutlinedIcon,\n  // Restaurant as RestaurantIcon,\n  // Cake as CakeIcon,\n  ShowChart as ShowChartIcon,\n  FitnessCenter as FitnessCenterIcon,\n  Settings as SettingsIcon,\n  RadioButtonUnchecked as RadioButtonUncheckedIcon,\n  DataUsage as DataUsageIcon,\n} from '@material-ui/icons'\n\nexport const Settings = () => {\n  const settings = useSelector(state => state.settings)\n  const dispatch = useDispatch()\n  const onChanged = makeOnChanged(settings, defaultSettings, dispatch, allSettingsChanged, { noui: false })\n  const onBlur = makeOnBlur(defaultSettings, dispatch, allSettingsChanged, { noui: false })\n\n  useEffect(() => {\n    dispatch(\n      titleChanged('Settings')\n    )\n  })\n\n  return (\n    <section className=\"settings\" style={screenContainer}>\n\n      <div className=\"settings_input\">\n\n        <div className=\"settings__input__currentbg\" style={inputContainer}>\n          <TextField label=\"Default current blood glucose\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'currentBg')}\n            onBlur={onBlur.bind(this, 'currentBg')}\n            value={settings.ui_currentBg}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><ShowChartIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">mmol/l</InputAdornment>,\n            }}\n            helperText=\":: This should match default target blood glucose ::\"\n          />\n        </div>\n\n        <div className=\"settings__input__targetbg\" style={inputContainer}>\n          <TextField label=\"Default target blood glucose\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'targetBg')}\n            onBlur={onBlur.bind(this, 'targetBg')}\n            value={settings.ui_targetBg}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">mmol/l</InputAdornment>,\n            }}\n            helperText=\":: This should match default current blood glucose ::\"\n          />\n        </div>\n\n        <div className=\"settings__input__unitadjustmentpercentage\" style={inputContainer}>\n          <TextField label=\"Default insulin efficiency adjustment\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'unitAdjustmentPercentage')}\n            onBlur={onBlur.bind(this, 'unitAdjustmentPercentage')}\n            value={settings.ui_unitAdjustmentPercentage}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><FitnessCenterIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">%</InputAdornment>,\n            }}\n            helperText=\":: Example: +20 for stress/illness/sitting, -20 for exercise ::\"\n          />\n        </div>\n\n        <div className=\"settings__input__carbsperunit\" style={inputContainer}>\n          <TextField label=\"Default carbs per unit\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'carbsPerUnit')}\n            onBlur={onBlur.bind(this, 'carbsPerUnit')}\n            value={settings.ui_carbsPerUnit}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">g</InputAdornment>,\n            }}\n            helperText=\":: How many carbs would you need exactly 1 unit to correct? Bigger amounts mean less insulin, as you can eat more carbs per unit. Smaller amounts mean more insulin as you can eat fewer carbs per unit. ::\"\n          />\n        </div>\n\n        <div className=\"settings__input__bgperunit\" style={inputContainer}>\n          <TextField label=\"Default blood glucose correction per unit\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'bgPerUnit')}\n            onBlur={onBlur.bind(this, 'bgPerUnit')}\n            value={settings.ui_bgPerUnit}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">mmol/l</InputAdornment>,\n            }}\n            helperText=\":: How many mmol/l would your glucose drop for 1 unit? Bigger amounts mean less insulin as 1 unit will move your blood sugar by a larger degree. Smaller amounts mean more insulin. ::\"\n          />\n        </div>\n\n        <div className=\"settings__input__totalpieces\" style={inputContainer}>\n          <TextField label=\"Default total pieces\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'totalPieces')}\n            onBlur={onBlur.bind(this, 'totalPieces')}\n            value={settings.ui_totalPieces}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><RadioButtonUncheckedIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{settings.consumedPieces}/{settings.totalPieces}</InputAdornment>,\n            }}\n            helperText=\":: How many pieces would you divide a packet/cake/meal into? ::\"\n          />\n        </div>\n\n        <div className=\"settings__input__consumedpieces\" style={inputContainer}>\n          <TextField label=\"Default consumed pieces\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'consumedPieces')}\n            onBlur={onBlur.bind(this, 'consumedPieces')}\n            value={settings.ui_consumedPieces}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><DataUsageIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">{settings.consumedPieces}/{settings.totalPieces}</InputAdornment>,\n            }}\n            helperText=\":: How many pieces of a packet/cake/meal would you normally eat? ::\"\n          />\n        </div>\n\n        <div className=\"settings__input__minimumcarbs\" style={inputContainer}>\n          <TextField label=\"Minimum carbs\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'minimumCarbs')}\n            onBlur={onBlur.bind(this, 'minimumCarbs')}\n            value={settings.ui_minimumCarbs}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">g</InputAdornment>,\n            }}\n            helperText=\":: Carbs will be rounded to this amount ::\"\n          />\n        </div>\n\n        <div className=\"settings__input__minimumunits\" style={inputContainer}>\n          <TextField label=\"Minimum units\"\n            inputProps={{style: input}}\n            onChange={onChanged.bind(this, 'minimumUnits')}\n            onBlur={onBlur.bind(this, 'minimumUnits')}\n            value={settings.ui_minimumUnits}\n            InputProps={{\n              startAdornment: <InputAdornment position=\"start\"><SettingsIcon /></InputAdornment>,\n              endAdornment: <InputAdornment position=\"end\">unit</InputAdornment>,\n            }}\n            helperText=\":: Units will be rounded to this amount ::\"\n          />\n        </div>\n\n\n      </div>\n\n    </section>\n  )\n}\n","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux'\r\nimport { titleChanged } from './store/view';\r\nimport { Typography } from '@material-ui/core';\r\nimport {\r\n  screenContainer\r\n} from './utils/styles';\r\n\r\nexport const Warning = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      titleChanged('Warning')\r\n    )\r\n  })\r\n\r\n  return <section className=\"proportionatecarbs\" style={screenContainer}>\r\n    <Typography variant=\"h4\" noWrap>\r\n      WARNING:\r\n    </Typography>\r\n    <div>\r\n    This app is to be used only as an <b>indication</b> of dosage amounts.\r\n    <p>\r\n      It is imperative that the user understands how to use the app and accepts liability for its use. The author accepts no liability for loss or damage resulting from the use of this app.\r\n    </p>\r\n    <p>\r\n      Please make sure you understand, set and appropriately adjust your \"<b>Default blood glucose correction per unit</b>\" and \"<b>Default carbs per unit</b>\" amounts in the settings panel before using this app.\r\n    </p>\r\n    <p>\r\n      The bolus insulin calculator <b>DOES NOT</b> take into account rising and falling of your blood glucose over time. You <b>MUST</b> adjust your units manually.\r\n    </p>\r\n    <p>\r\n      It is advised to start with the correct <b>BASAL</b> insulin first. To do this you should eat a no carb evening meal or fast on your evening meal. Adjust you basal insulin until your blood glucose is flat over night. Make sure to do this when you are not ill, stressed or doing abnormal amounts of exercise, you need a baseline basal that you can adjust later.\r\n    </p>\r\n    <p>\r\n      Once your basal insulin dose is correct, you can change you default carbohydrates per unit and default blood glucose correction per unit to best suit meal times and corrections. A bigger carbs per unit and blood glucose per unit value will mean less insulin, a smaller value will mean more insulin.\r\n    </p>\r\n    </div>\r\n  </section>\r\n\r\n}\r\n","/* eslint-disable react/jsx-no-target-blank */\r\nimport React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { titleChanged } from './store/view';\r\nimport {\r\n  screenContainer\r\n} from './utils/styles';\r\n\r\nexport const About = () => {\r\n  const dispatch = useDispatch();\r\n  const settings = useSelector(state => state.settings)\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      titleChanged('About')\r\n    )\r\n  })\r\n\r\n  return <section className=\"proportionatecarbs\" style={screenContainer}>\r\n    <div>\r\n      <p>\r\n        This is a product demo for an upcoming app. Please do not share the link unless given express permission from the author.\r\n      </p>\r\n      <p>\r\n        Author: <a href=\"https://oliverfoster.co.uk/about\" target=\"_blank\">Oliver Foster</a><br />\r\n        Version: {settings.version}<br />\r\n        Update available: {Boolean(settings.needsUpdating) ? \"Yes\" : \"No\"}\r\n      </p>\r\n      <p>\r\n        Leave feedback or requests using the form at <a href=\"https://oliverfoster.co.uk/contact\" target=\"_blank\">oliverfoster.co.uk/contact</a>. Make sure to say that your message is regarding the <b>diabetes calculator</b>.\r\n      </p>\r\n      <p>\r\n        Copyright © 2021, Oliver Foster<br />\r\n      </p>\r\n    </div>\r\n  </section>\r\n\r\n}\r\n","import './App.css';\nimport React, { useEffect } from 'react';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect\n} from \"react-router-dom\";\nimport { allSettingsChanged } from './store/settings';\nimport clsx from 'clsx'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { InsulinUnits } from './InsulinUnits';\nimport { ProportionateCarbs } from './ProportionateCarbs';\nimport { Settings } from './Settings'\nimport { Warning } from './Warning'\nimport { About } from './About'\nimport { AppBar, List, IconButton, Toolbar, Divider, ListItem, ListItemIcon, ListItemText, Drawer, Typography } from '@material-ui/core'\nimport {\n  ChevronLeft as ChevronLeftIcon,\n  ChevronRight as ChevronRightIcon,\n  Menu as MenuIcon,\n  LocalHospitalOutlined as LocalHospitalOutlinedIcon,\n  Restaurant as RestaurantIcon,\n  Settings as SettingsIcon,\n  SystemUpdate as SystemUpdateIcon,\n  Info as InfoIcon,\n  Help as HelpIcon\n} from '@material-ui/icons'\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\nconst drawerWidth = 220;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginLeft: -20,\n    marginRight: 20,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: 'nowrap',\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerClose: {\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: 'hidden',\n    width: theme.spacing(0) + 1,\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(7) + 1,\n    },\n  },\n  toolbar: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n}));\n\nfunction App() {\n  const dispatch = useDispatch();\n  const view = useSelector(state => state.view)\n  const settings = useSelector(state => state.settings)\n  const classes = useStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  console.log(settings.needsUpdating)\n\n  useEffect(() => {\n    (async () => {\n      const response = await fetch('./manifest.json');\n      const manifest = await response.json();\n      console.log(`Installed: ${settings.version}, Manifest: ${manifest.version}`)\n      dispatch(allSettingsChanged({ needsUpdating: (manifest.version !== settings.version) }))\n    })();\n  })\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <AppBar\n          position=\"fixed\"\n          className={clsx(classes.appBar, {\n            [classes.appBarShift]: open,\n          })}\n        >\n          <Toolbar>\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              onClick={handleDrawerOpen}\n              edge=\"start\"\n              className={clsx(classes.menuButton, {\n                [classes.hide]: open,\n              })}\n            >\n              <MenuIcon />\n            </IconButton>\n            <Typography variant=\"h6\" noWrap>\n              {view.title}\n            </Typography>\n          </Toolbar>\n        </AppBar>\n        <Drawer\n          variant=\"permanent\"\n          className={clsx(classes.drawer, {\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          })}\n          classes={{\n            paper: clsx({\n              [classes.drawerOpen]: open,\n              [classes.drawerClose]: !open,\n            }),\n          }}\n        >\n          <div className={classes.toolbar}>\n            <IconButton onClick={handleDrawerClose}>\n              {theme.direction === 'rtl' ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n            </IconButton>\n          </div>\n          <Divider />\n          <List>\n            <ListItem button key='Insulin' component={Link} to=\"/insulinunits\" onClick={handleDrawerClose}>\n              <ListItemIcon><LocalHospitalOutlinedIcon /></ListItemIcon>\n              <ListItemText primary={'Bolus Insulin'} />\n            </ListItem>\n            <ListItem button key='Carbs' component={Link} to='/proportionatecarbs' onClick={handleDrawerClose}>\n              <ListItemIcon><RestaurantIcon /></ListItemIcon>\n              <ListItemText primary={'Carbohydrates'} />\n            </ListItem>\n          </List>\n          <Divider />\n          <List>\n            <ListItem button key='Settings' component={Link} to='/settings' onClick={handleDrawerClose}>\n                <ListItemIcon><SettingsIcon /></ListItemIcon>\n                <ListItemText primary={'Settings'} />\n            </ListItem>\n            <ListItem button key='Warning' component={Link} to='/warning' onClick={handleDrawerClose}>\n                <ListItemIcon><InfoIcon /></ListItemIcon>\n                <ListItemText primary={'Warning'} />\n            </ListItem>\n            <ListItem button disabled={!settings.needsUpdating} key='Update' onClick={() => {\n              window.serviceWorkerRegistration.active.postMessage('update')\n            }}>\n                <ListItemIcon><SystemUpdateIcon /></ListItemIcon>\n                <ListItemText primary={'Update'} />\n            </ListItem>\n            <ListItem button key='About' component={Link} to='/about' onClick={handleDrawerClose}>\n                <ListItemIcon><HelpIcon /></ListItemIcon>\n                <ListItemText primary={'About'} />\n            </ListItem>\n          </List>\n        </Drawer>\n        <main className={classes.content}>\n          <div className={classes.toolbar} />\n          <Switch>\n            <Route path=\"/insulinunits\">\n              <InsulinUnits />\n            </Route>\n            <Route path=\"/proportionatecarbs\">\n              <ProportionateCarbs />\n            </Route>\n            <Route path=\"/settings\">\n              <Settings />\n            </Route>\n            <Route path=\"/warning\">\n              <Warning />\n            </Route>\n            <Route path=\"/about\">\n              <About />\n            </Route>\n            <Redirect to=\"/insulinunits\" />\n          </Switch>\n        </main>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { configureStore } from '@reduxjs/toolkit'\n\nimport settingsReducer from './settings'\nimport insulinUnitsReducer from './insulinUnits'\nimport proportionateCarbsReducer from './proportionateCarbs'\nimport viewReducer from './view'\n\nexport default configureStore({\n  reducer: {\n    view: viewReducer,\n    settings: settingsReducer,\n    insulinUnits: insulinUnitsReducer,\n    proportionateCarbs: proportionateCarbsReducer\n  }\n})\n","// Register the service worker\r\nif ('serviceWorker' in navigator) {\r\n  // Wait for the 'load' event to not block other work\r\n  window.addEventListener('load', async () => {\r\n    // Try to register the service worker.\r\n    let registration;\r\n    try {\r\n      registration = await navigator.serviceWorker.register('./serviceWorker.js');\r\n      console.log('Service worker registered! 😎', registration);\r\n    } catch (err) {\r\n      console.log('😥 Service worker registration failed: ', err);\r\n      return;\r\n    }\r\n\r\n    navigator.serviceWorker.addEventListener('message', event => {\r\n      // event is a MessageEvent object\r\n      console.log(`The service worker sent me a message: ${event.data}`);\r\n      switch (event.data) {\r\n        case \"refresh\":\r\n          window.location.reload();\r\n          return;\r\n        default:\r\n          return;\r\n      }\r\n    });\r\n\r\n    navigator.serviceWorker.ready.then( registration => {\r\n      window.serviceWorkerRegistration = registration;\r\n      registration.active.postMessage(\"hi\");\r\n    });\r\n  });\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport store from './store/store'\nimport './manifest';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}